{% extends "package/read_base.html" %}


{% block primary_content_inner %}

    {% if h.check_access("flakes_feedback_feedback_create", {package_id: pkg_dict.id}) %}
        {% block post_feedback_button %}
            <p>
                {% link_for _('Update feedback') if existing else _('Leave feedback'), named_route="flakes_feedback.post", id=pkg.name, class_='btn btn-primary', icon='comment-medical' %}
            </p>
        {% endblock %}
    {% endif %}

    <ul class="list-unstyled">
        {% for feedback in feedbacks|sort(attribute="modified_at", reverse=True) %}
            <li>
                {% block feedback scoped %}
                    {{ h.time_ago_from_timestamp(feedback.modified_at) }} by {{ h.linked_user(feedback.author_id) }}
                    <br/>
                    <blockquote>
                        {{ h.render_markdown(feedback.data.feedback) }}
                    </blockquote>
                {% endblock %}
            </li>
        {% endfor %}
    </ul>
{% endblock %}
