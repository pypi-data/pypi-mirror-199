Metadata-Version: 2.1
Name: ic-toolkit-edd
Version: 0.3.4
Summary: 
Author: Marcelo Assis
Author-email: 94455042+marceloapda@users.noreply.github.com
Requires-Python: >=3.7,<4.0
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Dist: boto3
Requires-Dist: pandas
Requires-Dist: pymysql
Requires-Dist: typer[all] (>=0.4.2,<0.5.0)
Description-Content-Type: text/markdown

# IC-ToolKit-EDD

<img src="https://user-images.githubusercontent.com/71731452/177205395-ffe34180-5a7d-41f5-aba2-31ccc5b31031.gif" alt="exemplo imagem">

> Esse projeto tem como objetivo facilitar a resolu√ß√£o de problemas da equipe de transforma√ß√£o.

### Ajustes e melhorias

√â possivel implementar qualquer tipo de script nesse projeto

## üíª Pr√©-requisitos

Antes de come√ßar, verifique se voc√™ atendeu aos seguintes requisitos:
<!---Estes s√£o apenas requisitos de exemplo. Adicionar, duplicar ou remover conforme necess√°rio--->
* Voc√™ instalou uma vers√£o do Python superior a 3.7
* Voc√™ tem uma m√°quina `<Windows / Linux>`.

## üöÄ Instalando IC-ToolKit-EDD

Para instalar o IC-ToolKit-EDD, siga estas etapas:

Linux:
```
pip3 install ic-toolkit-edd
```

Windows:
```
pip install ic-toolkit-edd
```

Windows / Linux:

Use o comando abaixo para informar as credencias do seu banco MySQL.
```
ic config
```
> Obs: Isso vai gerar um arquivo .credentials em uma pasta .intuitivecare

<img src="https://user-images.githubusercontent.com/71731452/177249673-6373a5e5-8d13-4c70-8d2b-fefab60002db.svg" width=500>

## ‚òï Comandos IC-ToolKit-EDD

Use o comando abaixo para calcular as hashs dos arquivos do diret√≥rio atual e gerar uma query para acompanh√°-los na pipeline

```
ic gethash
```

>Op√ß√µes:
>- `--sha256`: calcula os hashes usando o algoritmo SHA-256 ao inv√©s do MD5 (Obs.: ao usar essa op√ß√£o, n√£o √© gerada uma query)  

> Obs: Apos a execu√ß√£o do comando, a query gerada ser√° copiada para a √°rea de transfer√™ncia


<img src="https://user-images.githubusercontent.com/71731452/177250804-c6833e17-9ec4-45a1-a166-6e07397f08d7.png" width=600>

---
Use o comando abaixo para baixar um ou mais arquivos da Amazon S3

```
ic downorig <>
```

>Op√ß√µes:
> - `--tipo-id ou -t`: define o tipo dos IDs informados, podendo assumir um dentre os valores `original|parseado|padronizado|arquivo`
> - `--output-path ou -o`: define o caminho do diret√≥rio para o qual os arquivos devem ser baixados 
>   - Valor padr√£o: diret√≥rio atual (`"."`)

> Obs: Tambem √© possivel baixar parseados e padronizados da mesma forma, utilizando os comandos downpars ou downpadr

<img src="https://user-images.githubusercontent.com/71731452/177250567-1464f5fa-292b-4b60-963c-f0892867780d.svg" width=600>

---
Use o comando abaixo para fazer upload de um ou mais arquivos para o seu diretorio correto na Amazon S3

```
ic upload
```
> Obs: Esse comando faz o upload de todos os arquivos do diretorio atual que contenham uma exten√ß√£o compativel com nossas transforma√ß√µes.

<img src="https://user-images.githubusercontent.com/94455042/178642229-3c392b88-430a-40fc-8c3d-c4c4b846660f.svg" width=600>

---
Use o comando abaixo para gerar um filtro para vizualizar um arquivo na plataforma.

```
ic filtro
```
> Obs: Esse comando gera um filtro para a plataforma IC com base em um id_arquivo.

<img src="https://user-images.githubusercontent.com/94455042/203675246-ac481c56-2d26-43b7-80a9-11c0c663dbde.svg" width=600>

O comando abaixo pode ser utilizado para converter um ou mais documentos PDF em TXT usando a API da IC

````commandline
ic cvtpdf <>
````

>Op√ß√µes:
> - `--input-path ou -i`: define o caminho para o PDF (ou diret√≥rio contendo arquivos PDF) a ser convertido para TXT
>   - Valor padr√£o: diret√≥rio atual (`"."`)
> - `--stripper ou -s`: define o *stripper* a ser utilizado para gerar o TXT, podendo assumir um dentre os valores `raw|layout|ordered_raw|ordered_layout`
>   - Valor padr√£o: `raw`
> - `--output-path ou -o`: define o caminho do diret√≥rio para o qual os arquivos devem ser baixados 
>   - Valor padr√£o: diret√≥rio atual (`"."`)

Use o comando abaixo para gerar o c√≥digo de equival√™ncias (Python) a partir da planilha de equival√™ncias

```commandline
ic equiv
```

Basta entrar o nome do *Dataframe* de destino e copiar as tr√™s primeiras colunas da planilha de equival√™ncia, pressionando enter logo em seguida.
O c√≥digo de equival√™ncias ser√° gerado e copiado para sua √°rea de transfer√™ncia.

>Op√ß√µes:
> - `--destino ou -d`: define o nome do *Dataframe* de destino (tamb√©m pode ser informado via prompt)
> - `--origem ou -o`: define o nome do *Dataframe* de origem (opcional)
>   - Valor padr√£o: `df`

Use o comando abaixo para obter o *version_id* de um arquivo na S3:

```commandline
ic verids3
```

Basta informar o *Bucket*, Prefixo e Nome do arquivo na S3 e o *version_id* ser√° exibido na tela e copiado para sua √°rea de transfer√™ncia.

Use o comando abaixo para baixar um arquivo qualquer na S3:

```commandline
ic downs3
```

Basta informar o *Bucket*, Prefixo e Nome do arquivo na S3 e o arquivo ser√° baixado no diret√≥rio de destino (por padr√£o, o diret√≥rio atual).

>Op√ß√µes:
>  - `--output-path ou -o`: define o caminho do diret√≥rio para o qual os arquivos devem ser baixados 
>   - Valor padr√£o: diret√≥rio atual (`"."`)

Use o comando abaixo para fazer o upload de um arquivo qualquer para a S3:

```commandline
ic uploads3
```

Basta informar o *Bucket*, prefixo e, opcionalmente, o nome do objeto (definido, por padr√£o, como o mesmo nome do arquivo) a ser gerado na S3 para o arquivo. 

>Op√ß√µes:
>  - `--input-path ou -i`: define o caminho do arquivo a ser enviado para a s3 (tamb√©m pode ser informado via prompt)

Use o comando abaixo para executar o script de reexecu√ß√£o do @AndreMartinsIC para uma lista de arquivos:

```commandline
ic reexec
```

Basta executar o comando e informar o passo do *pipeline* a ser reexecutado, o intervalo entre o disparo das requisi√ß√µes de reexecu√ß√£o e a lista de IDs dos arquivos a serem reprocessados.
Os IDs podem estar separados por v√≠rgulas ou espa√ßos (verticais ou horizontais). Ap√≥s entrar os IDs, basta pressionar enter duas vezes para disparar a reexecu√ß√£o.

>Op√ß√µes:
>  - `--passo-pipeline ou -p`: define o passo da pipeline a ser reexecutado e pula esse prompt 
>  - `--tempo-intervalo ou -t`: define o tempo de espera ap√≥s disparar cada requisi√ß√£o (em segundos) e pula esse prompt
>    - Valor padr√£o: 30 segundos
>  - `--mostrar-ids ou -i`: se essa flag for utilizada, os IDs de cada arquivo reprocessado s√£o exibidos na tela


## ü§ù Contribuindo

### Adicionando novas fun√ß√µes

Para adicionar novas funcionalidades acesse a documenta√ß√£o.

https://typer.tiangolo.com/


## üí° Lembran√ßas do grande idealizador do projeto: Marcelo Assis
<p align="center">
  <img src="https://github.com/IntuitiveCare/IC-ToolKit-EDD/blob/main/images/marcelo_o_criador.jpeg" width="350" title="Criador Toolkit">
</p>

