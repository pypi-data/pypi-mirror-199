"use strict";(globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]=globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]||[]).push([[167],{38720:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(59835),l=n(60499),o=n(85621);const i=(0,a.aZ)({__name:"ConfigFileEditor",props:{modelValue:null,language:null,theme:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=(0,l.iH)();let u;return(0,a.bv)((()=>{u=o.editor.create(i.value,{value:n.modelValue,language:n.language,theme:n.theme,fontFamily:"Roboto Mono"}),u.onDidChangeModelContent((()=>{const e=u.getValue();t("update:modelValue",e)}))})),(0,a.YP)((()=>n.theme),(e=>u.updateOptions({theme:e}))),(0,a.YP)((()=>n.modelValue),(e=>u.setValue(e))),(e,t)=>((0,a.wg)(),(0,a.iD)("div",{ref_key:"dom",ref:i,class:"editor"},null,512))}});var u=n(11639);const c=(0,u.Z)(i,[["__scopeId","data-v-f81849bc"]]),r=c},84267:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(59835),l=n(60499),o=n(19302),i=n(38720),u=n(34136),c=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(t){o(t)}}function u(e){try{c(a["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):l(e.value).then(i,u)}c((a=a.apply(e,t||[])).next())}))};const r=(0,a._)("div",{class:"text-h5"},"编辑设备信息文件",-1),s=(0,a.aZ)({__name:"AccountDeviceEditorView",props:{uin:null},setup(e){const t=e,n=(0,o.Z)(),s=(0,l.iH)(),d=(0,l.iH)(!0);function v(){return c(this,void 0,void 0,(function*(){try{d.value=!0;const{data:e}=yield u.api.accountDeviceReadApiUinDeviceGet(t.uin);s.value=JSON.stringify(e,null,2)}catch(e){s.value=void 0}finally{d.value=!1}}))}function f(){return c(this,void 0,void 0,(function*(){if(s.value)try{d.value=!0,s.value=JSON.stringify(yield u.api.accountDeviceWriteApiUinDevicePatch(t.uin,JSON.parse(s.value)).then((e=>e.data)),null,2),n.notify({message:"设备信息修改成功",color:"positive"})}catch(e){n.notify({message:`设备信息修改失败: ${e.message}`,color:"negative"})}finally{d.value=!1}}))}function m(){return c(this,void 0,void 0,(function*(){try{d.value=!0,yield u.api.accountConfigDeleteApiUinConfigDelete(t.uin),yield v(),n.notify({message:"设备信息删除成功",color:"positive"})}catch(e){n.notify({message:"设备信息删除失败",color:"negative"})}finally{d.value=!1}}))}return(0,a.bv)(v),(e,t)=>{const o=(0,a.up)("q-btn"),u=(0,a.up)("q-card-section"),c=(0,a.up)("q-separator"),p=(0,a.up)("q-card-actions"),g=(0,a.up)("q-inner-loading"),h=(0,a.up)("q-card"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{class:"row q-pa-md justify-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"shadow col-12",style:{height:"calc(100vh - 5rem)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row justify-start items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{onClick:e.$router.back,flat:"",label:"返回",color:"grey",icon:"arrow_back"},null,8,["onClick"]),r])),_:1}),(0,a.Wm)(c),(0,a.Wm)(p,{class:"q-gutter-md q-mx-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{flat:"",onClick:f,color:"primary",label:"提交修改",icon:"save"}),(0,a.Wm)(o,{flat:"",onClick:v,color:"secondary",label:"重新加载配置文件",icon:"refresh"}),(0,a.Wm)(o,{flat:"",onClick:m,color:"negative",label:"删除并重新生成配置文件",icon:"delete"})])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>["undefined"!==typeof s.value?((0,a.wg)(),(0,a.j4)(i.Z,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),language:"json",style:{height:"70vh"},theme:(0,l.SU)(n).dark.isActive?"vs-dark":"vs"},null,8,["modelValue","theme"])):(0,a.kq)("",!0),(0,a.Wm)(g,{showing:d.value},null,8,["showing"])])),_:1})])),_:1})])),_:1})}}});var d=n(69885),v=n(44458),f=n(63190),m=n(24455),p=n(50926),g=n(11821),h=n(60854),y=n(69984),w=n.n(y);const _=s,b=_;w()(s,"components",{QPage:d.Z,QCard:v.Z,QCardSection:f.Z,QBtn:m.Z,QSeparator:p.Z,QCardActions:g.Z,QInnerLoading:h.Z})}}]);