/* empty css                             */import{d as L,e as T,r as j,c as F,n as i,W as O,A as q,z as W,h as o,q as m,b as s,w as n,F as V,x as M,k as a,aw as h,i as p,m as b,j as y,v,p as _,l as d,ax as G,ay as H}from"./index-ee8437d7.js";import{_ as B}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-77828dd3.js";import{c as J,V as c}from"./VCardText-6a1c7759.js";import{a as S}from"./VCard-8b0196fc.js";import{V as K}from"./VToolbar-9efe4adb.js";import{V as z}from"./VMenu-41a392e9.js";import{a as E,V as C}from"./VBtn-b96ed4d9.js";import{V as Q}from"./VAlert-4fd0fec3.js";import{V as $}from"./VTooltip-29fa8f6f.js";import{V as X}from"./forwardRefs-c136d9cb.js";import"./VDivider-4507c497.js";const Y=d("br",null,null,-1),Z={class:"listitem-actions"},ee={key:0,class:"listitem-action",style:{"margin-right":"15px"}},te={key:1,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:3,class:"listitem-action",style:{"margin-right":"15px"}},ae={class:"listitem-action"},se=d("br",null,null,-1),be=L({__name:"Providers",setup(oe){const P=T(),f=j([]),U=F(()=>Object.values(i.providerManifests).filter(t=>!t.builtin&&(t.multi_instance||!f.value.find(r=>r.domain))).sort((t,r)=>(t.name||i.providerManifests[t.domain].name).toUpperCase()>(r.name||i.providerManifests[r.domain].name).toUpperCase()?1:-1)),I=i.subscribe(O.PROVIDERS_UPDATED,()=>{w()});q(I);const w=async function(){f.value=await i.getData("config/providers");const t=await i.getData("providers/available");for(const r of t)i.providerManifests[r.domain]=r},N=function(t){i.sendCommand("config/providers/remove",{instance_id:t}),f.value=f.value.filter(r=>r.instance_id!=t)},D=function(t){P.push(`/settings/editprovider/${t}`)},R=function(t){P.push(`/settings/addprovider/${t.domain}`)},x=function(t){const r={enabled:!t.enabled};i.sendCommand("config/providers/update",{instance_id:t.instance_id,update:r})},A=function(t){i.getData("config/providers/reload",{instance_id:t}).catch(r=>alert(r))};return W(()=>i.providers,t=>{t&&w()},{immediate:!0}),(t,r)=>(o(),m("section",null,[s(J,{style:{"margin-right":"15px"}},{default:n(()=>[(o(!0),m(V,null,M(a(h),g=>(o(),p(S,{style:{"margin-bottom":"15px"}},{default:n(()=>[s(K,{title:t.$t(`settings.${g}providers`),density:"compact"},{append:n(()=>[a(U).filter(e=>e.type==g).length?(o(),p(z,{key:0},{activator:n(({props:e})=>[s(E,b({variant:"text"},e),{default:n(()=>[y(v(t.$t("settings.add_new")),1)]),_:2},1040)]),default:n(()=>[s(S,{density:"compact"},{default:n(()=>[(o(!0),m(V,null,M(a(U).filter(e=>e.type==g),e=>(o(),p(c,{density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},key:e.domain,title:e.name,onClick:u=>R(e)},{prepend:n(()=>[s(B,{domain:e.domain,size:26,class:"listitem-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1032,["title"]),g==a(h).MUSIC&&f.value.filter(e=>e.type==a(h).MUSIC&&e.domain in a(i).providerManifests&&e.domain!="url").length==0?(o(),p(Q,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:n(()=>[d("b",null,v(t.$t("settings.no_providers")),1),Y,y(" "+v(t.$t("settings.no_providers_detail")),1)]),_:1})):_("",!0),(o(!0),m(V,null,M(f.value.filter(e=>e.type==g&&e.domain in a(i).providerManifests).sort((e,u)=>(e.name||a(i).providerManifests[e.domain].name).toUpperCase()>(u.name||a(i).providerManifests[u.domain].name).toUpperCase()?1:-1),e=>(o(),p(c,{key:e.instance_id,title:e.name||a(i).providerManifests[e.domain].name,subtitle:a(i).providerManifests[e.domain].description,onClick:u=>D(e.instance_id)},{prepend:n(()=>[s(B,{domain:e.domain,size:"40px",class:"listitem-thumb",style:{"margin-left":"-5px"}},null,8,["domain"])]),append:n(()=>{var u;return[d("div",Z,[a(i).syncTasks.value.filter(l=>l.provider_instance==e.instance_id).length>0?(o(),m("div",ee,[s($,{location:"top end",origin:"end center"},{activator:n(({props:l})=>[s(C,b(l,{color:"grey"}),{default:n(()=>[y(" mdi-sync ")]),_:2},1040)]),default:n(()=>[d("span",null,v(t.$t("settings.sync_running")),1)]),_:1})])):_("",!0),e.enabled?e.last_error?(o(),m("div",ie,[s($,{location:"top end",origin:"end center"},{activator:n(({props:l})=>[s(C,b(l,{color:"red"}),{default:n(()=>[y(" mdi-alert-circle ")]),_:2},1040)]),default:n(()=>[d("span",null,v(e.last_error),1)]),_:2},1024)])):(u=a(i).providers[e.instance_id])!=null&&u.available?_("",!0):(o(),m("div",ne,[s($,{location:"top end",origin:"end center"},{activator:n(({props:l})=>[s(C,G(H(l)),{default:n(()=>[y(" mdi-timer-sand ")]),_:2},1040)]),default:n(()=>[d("span",null,v(t.$t("settings.not_loaded")),1)]),_:1})])):(o(),m("div",te,[s($,{location:"top end",origin:"end center"},{activator:n(({props:l})=>[s(C,b(l,{color:"grey"}),{default:n(()=>[y(" mdi-cancel ")]),_:2},1040)]),default:n(()=>[d("span",null,v(t.$t("settings.provider_disabled")),1)]),_:1})])),d("div",ae,[s(z,{location:"bottom end"},{activator:n(({props:l})=>[s(E,b({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},l,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:n(()=>[s(X,null,{default:n(()=>{var l;return[s(c,{title:t.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:k=>D(e.instance_id)},null,8,["title","onClick"]),s(c,{title:e.enabled?t.$t("settings.disable"):t.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:a(i).providerManifests[e.domain].builtin,onClick:k=>x(e)},null,8,["title","disabled","onClick"]),a(i).providerManifests[e.domain].documentation?(o(),p(c,{key:0,title:t.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:a(i).providerManifests[e.domain].documentation,target:"_blank"},null,8,["title","href"])):_("",!0),(l=a(i).providers[e.instance_id])!=null&&l.available&&g==a(h).MUSIC?(o(),p(c,{key:1,title:t.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:k=>a(i).startSync(void 0,[e.instance_id])},null,8,["title","onClick"])):_("",!0),!a(i).providerManifests[e.domain].builtin&&!a(i).providerManifests[e.domain].load_by_default?(o(),p(c,{key:2,title:t.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:k=>N(e.instance_id)},null,8,["title","onClick"])):_("",!0),s(c,{title:t.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:k=>A(e.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128)),se]),_:2},1024))),256))]),_:1})]))}});export{be as default};
