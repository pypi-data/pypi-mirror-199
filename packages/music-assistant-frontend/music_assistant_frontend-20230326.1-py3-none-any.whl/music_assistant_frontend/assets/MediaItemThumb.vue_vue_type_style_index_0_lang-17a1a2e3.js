import{P as h,d,r as p,a7 as m,c as l,z as v,h as y,i as $,w as k,l as M,b as T,M as _,k as U,Q as c,n as S}from"./index-ee8437d7.js";import{b as B}from"./VBtn-b96ed4d9.js";import{b as x}from"./VCardText-6a1c7759.js";const V=t=>t==null||!t?!1:typeof t=="boolean"?t:!!JSON.parse(String(t).toLowerCase()),j=function(t){t=Math.floor(t);const a=Math.floor(t/3600),e=Math.floor((t-a*3600)/60),n=t-a*3600-e*60;let i=a.toString(),r=e.toString(),u=n.toString();return a<10&&(i="0"+a),e<10&&(r="0"+e),n<10&&(u="0"+n),i==="00"?r+":"+u:i+":"+r+":"+u},g=function(t,a){return t?t.length<=a?t:t.slice(0,a)+"...":""},D=function(t){return t?t.map(a=>a.name).join(" / "):""},O=function(t,a){let e="";return t!=null&&t.name&&(t!=null&&t.label)?e=`${t.name}: ${a(t==null?void 0:t.label)}`:t!=null&&t.name?e=t.name:t!=null&&t.label?e=a(t==null?void 0:t.label):e=t.path||"",e},q=function(t,a=26){return t?t.type!=h.GROUP&&t.group_childs.length>0?`${g(t.display_name,a-3)} +${t.group_childs.length}`:g(t.display_name,a):""},C={class:"d-flex align-center justify-center fill-height"},N=function(t,a=c.THUMB,e=!1){if(t){if("metadata"in t&&t.metadata.images){for(const n of t.metadata.images)if(!(n.source=="http"&&!e)&&n.type==a)return n}if("album"in t&&t.album&&"metadata"in t.album&&t.album.metadata&&t.album.metadata.images){for(const n of t.album.metadata.images)if(!(n.source=="http"&&!e)&&n.type==a)return n}if("artist"in t&&"metadata"in t.artist&&t.artist.metadata&&t.artist.metadata.images){for(const n of t.artist.metadata.images)if(!(n.source=="http"&&!e)&&n.type==a)return n}if("artists"in t&&t.artists){for(const n of t.artists)if("metadata"in n&&n.metadata.images){for(const i of n.metadata.images)if(!(i.source=="http"&&!e)&&i.type==a)return i}}}},P=async function(t,a=c.THUMB,e){var i;if(!t)return;let n="";if("image_url"in t&&t.image_url)n=t.image_url;else{const r=N(t,a,!0);if(!r)return;if(r.source!=="http"){const u=encodeURIComponent(encodeURIComponent(r.url)),o="metadata"in t?(i=t.metadata)==null?void 0:i.checksum:"";return`${S.baseUrl}/imageproxy?size=${e||0}&path=${u}&source=${r.source}&checksum=${o}`}n=r.url}return e?`https://images.weserv.nl/?url=${n}&w=${e}&h=${e}&fit=cover&a=attention`:n},A=d({__name:"MediaItemThumb",props:{item:null,width:{default:"100%"},height:{default:"auto"},aspectRatio:{default:"1/1"},cover:{type:Boolean,default:!0},fallback:{default:void 0},thumb:{type:Boolean,default:!0}},setup(t){const a=t,e=p(),n=m(),i=l(()=>a.fallback?a.fallback:a.item?n.current.value.dark?`https://ui-avatars.com/api/?name=${a.item.name}&size=${r.value||256}&bold=true&background=1d1d1d&color=383838`:`https://ui-avatars.com/api/?name=${a.item.name}&size=${r.value||256}&bold=true&background=a0a0a0&color=cccccc`:""),r=l(()=>typeof a.width=="number"?a.width:a.thumb?256:0);return v(()=>a.item,async u=>{u&&(e.value=await P(u,c.THUMB,r.value)||i.value)},{immediate:!0}),(u,o)=>{var s,f;return y(),$(x,{key:"uri"in t.item?(s=t.item)==null?void 0:s.uri:(f=t.item)==null?void 0:f.queue_item_id,style:_(`height:${t.height};`),cover:t.cover,src:e.value,width:t.width,"aspect-ratio":t.aspectRatio,onError:o[0]||(o[0]=()=>{e.value=U(i)})},{placeholder:k(()=>[M("div",C,[T(B,{indeterminate:""})])]),_:1},8,["style","cover","src","width","aspect-ratio"])}}});export{A as _,D as a,P as b,O as c,j as f,q as g,V as p,g as t};
