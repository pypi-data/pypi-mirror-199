import{P as S}from"./ListviewItem-d7abb943.js";import{g as G,b as l,d as E,r as P,G as Y,e as q,z as K,A as Q,s as h,c as R,h as r,q as c,w as i,i as s,p as m,k as u,N as H,l as g,j as p,v as d,F as I,x as M,m as J,n as F,Q as N}from"./index-6b8e9665.js";import{_ as D,b as U}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-bf526eac.js";import{g as O,b as W}from"./MediaItemContextMenu.vue_vue_type_style_index_0_lang-59990fbf.js";import{b as X,a as j,c as Z,V as _}from"./VCardText-3c6786ab.js";import{b as ee,V as b,a as B,c as te}from"./VCard-a22457ec.js";import{u as ie,V as x,a as $,l as ae}from"./VBtn-78ffa2a3.js";import{V as re}from"./VMenu-c38191cf.js";import{V as le}from"./forwardRefs-5242d0a6.js";import{b as ne,c as oe}from"./layout-fac2351e.js";import{V as me}from"./VDialog-e023b317.js";import{b as se}from"./VSelect-2ae84853.js";const z=G()({name:"VLayout",props:ne(),setup(e,o){let{slots:y}=o;const{layoutClasses:k,layoutStyles:V,getLayoutItem:L,items:C,layoutRef:T}=oe(e);return ie(()=>{var v;return l("div",{ref:T,class:k.value,style:V.value},[(v=y.default)==null?void 0:v.call(y)])}),{getLayoutItem:L,items:C}}}),de={key:0,xs5:"","pa-5":"",style:{width:"230px",height:"230px","margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},ue={key:0},ce={key:1},ye={style:{"padding-bottom":"10px"}},fe=["onClick"],ge={style:{color:"primary"}},pe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},be=["innerHTML"],ve={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},he={style:{position:"absolute",float:"right",right:"15px",top:"15px"}},Re=E({__name:"InfoHeader",props:{item:null},setup(e){const o=e,y=P(!1),k=P(),{mobile:V}=Y(),L=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,C=q();K(()=>o.item,async t=>{t&&(h.topBarTitle=t.name,k.value=await U(o.item,N.FANART)||await U(o.item,N.THUMB),h.topBarContextMenuItems=W([t],t))},{immediate:!0}),Q(()=>{h.topBarContextMenuItems=[]});const T=function(t){C.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},v=function(t){console.log("artistClick",t),C.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},w=R(()=>{let t="";return o.item?(o.item.metadata&&o.item.metadata.description?t=o.item.metadata.description:o.item.metadata&&o.item.metadata.copyright?t=o.item.metadata.copyright:"artists"in o.item&&o.item.artists.forEach(function(n){"metadata"in n&&n.metadata.description&&(t=n.metadata.description)}),V.value,t=t.replace(`\r
`,"<br /><br /><br />"),t=t.replace("\r","<br /><br />"),t=t.replace(`
`,"<br /><br />"),t):""}),A=R(()=>{const t=V.value?160:260;return w.value.length>t?w.value.substring(0,t)+"...":w.value});return(t,n)=>(r(),c("div",null,[l(B,{variant:"flat",img:u(L),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?m("",!0):(r(),s(ae,{key:0,indeterminate:""})),l(X,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(r(),s(z,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[t.$vuetify.display.mobile?m("",!0):(r(),c("div",de,[e.item.media_type&&(e.item.media_type==u(H).ARTIST||"owner"in e.item)?(r(),c("div",ue,[l(j,{size:"192"},{default:i(()=>[l(D,{item:e.item,height:"230px",width:"230px"},null,8,["item"])]),_:1})])):(r(),c("div",ce,[l(D,{width:"230px",item:e.item},null,8,["item"])]))])),g("div",null,[l(ee,null,{default:i(()=>[p(d(e.item.name),1)]),_:1}),g("div",ye,["version"in e.item&&e.item.version?(r(),s(b,{key:0,class:"caption"},{default:i(()=>[p(d(e.item.version),1)]),_:1})):m("",!0),"artists"in e.item&&e.item.artists?(r(),s(b,{key:1,class:"title accent--text"},{default:i(()=>[l(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(r(!0),c(I,null,M(e.item.artists,(a,f)=>(r(),c("span",{key:a.item_id},[g("a",{style:{color:"accent"},onClick:xe=>v(a)},d(a.name),9,fe),f+1<e.item.artists.length?(r(),c("span",{key:f,style:{color:"accent"}},d(" / "))):m("",!0)]))),128))]),_:1})):m("",!0),"artist"in e.item&&e.item.artist?(r(),s(b,{key:2,class:"title"},{default:i(()=>[l(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),g("a",{onClick:n[0]||(n[0]=a=>v(e.item.artist))},d(e.item.artist.name),1)]),_:1})):m("",!0),"owner"in e.item&&e.item.owner?(r(),s(b,{key:3,class:"title"},{default:i(()=>[l(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),g("a",ge,d(e.item.owner),1)]),_:1})):m("",!0),"album"in e.item&&e.item.album?(r(),s(b,{key:4},{default:i(()=>[l(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),g("a",{style:{color:"secondary"},onClick:n[1]||(n[1]=a=>{var f;return T((f=e.item)==null?void 0:f.album)})},d(e.item.album.name),1)]),_:1})):m("",!0)]),g("div",pe,[l(re,{location:"bottom"},{activator:i(({props:a})=>{var f;return[l($,J({color:"primary"},a,{"prepend-icon":"mdi-play-circle",disabled:!((f=u(h).selectedPlayer)!=null&&f.available)||u(h).blockGlobalPlayMenu}),{default:i(()=>[p(d(t.$t("play")),1)]),_:2},1040,["disabled"])]}),default:i(()=>[l(B,{"min-width":"300"},{default:i(()=>[l(le,{lines:"one",density:"comfortable"},{default:i(()=>[(r(!0),c(I,null,M(u(O)([e.item]),a=>(r(),s(_,{key:a.label,title:t.$t(a.label,a.labelArgs),onClick:f=>a.action?a.action():""},{prepend:i(()=>[l(j,{style:{"padding-right":"10px"}},{default:i(()=>[l(x,{icon:a.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1}),!t.$vuetify.display.mobile&&!e.item.in_library?(r(),s($,{key:0,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart-outline",onClick:n[2]||(n[2]=a=>u(F).addItemsToLibrary([e.item]))},{default:i(()=>[p(d(t.$t("add_library")),1)]),_:1})):m("",!0),!t.$vuetify.display.mobile&&e.item.in_library?(r(),s($,{key:1,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart",onClick:n[3]||(n[3]=a=>u(F).removeItemsFromLibrary([e.item]))},{default:i(()=>[p(d(t.$t("remove_library")),1)]),_:1})):m("",!0)]),u(A)?(r(),s(b,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:n[4]||(n[4]=a=>y.value=!y.value)},{default:i(()=>[g("div",{innerHTML:u(A)},null,8,be)]),_:1})):m("",!0),e.item&&e.item.metadata.genres?(r(),c("div",ve,[(r(!0),c(I,null,M(e.item.metadata.genres,a=>(r(),s(se,{key:a,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[p(d(a),1)]),_:2},1024))),128))])):m("",!0)])]),_:1})):m("",!0),e.item?(r(),s(z,{key:2,style:{"z-index":"800",height:"100%","padding-left":"15px"}},{default:i(()=>[g("div",he,[l(S,{"provider-mappings":e.item.provider_mappings,height:25,"enable-details":!0,"enable-preview":e.item.media_type==u(H).TRACK},null,8,["provider-mappings","enable-preview"])])]),_:1})):m("",!0)]),_:1},8,["img"]),l(me,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=a=>y.value=a),width:"auto"},{default:i(()=>[l(B,null,{default:i(()=>[l(Z,{innerHTML:u(w)},null,8,["innerHTML"]),l(te,null,{default:i(()=>[l($,{color:"primary",block:"",onClick:n[5]||(n[5]=a=>y.value=!1)},{default:i(()=>[p(d(t.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Re as _};
