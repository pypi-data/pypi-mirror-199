/* empty css                             */import{d as A,e as L,r as j,c as F,n as i,V as O,A as q,z as G,h as o,q as p,b as a,w as n,k as s,aw as V,i as f,l as m,v as u,j as b,p as g,F as $,x as M,m as y,ax as H,ay as J}from"./index-6b8e9665.js";import{_ as w}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-fa2998bf.js";import{V as K}from"./VAlert-ab5bd938.js";import{V as Q}from"./VDialog-e023b317.js";import{a as P,V as h}from"./VBtn-78ffa2a3.js";import{V as z,b as W}from"./VToolbar-acf511e0.js";import{V as B}from"./forwardRefs-5242d0a6.js";import{c as X,V as c}from"./VCardText-3c6786ab.js";import{V as C}from"./VTooltip-f86f9b47.js";import{V as Y}from"./VMenu-c38191cf.js";import"./VDivider-eaeef5d4.js";const Z=m("br",null,null,-1),ee={class:"listitem-actions"},te={key:0,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:1,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ae={key:3,class:"listitem-action",style:{"margin-right":"15px"}},se={class:"listitem-action"},oe=m("br",null,null,-1),ke=A({__name:"Providers",setup(re){const D=L(),v=j([]),x=F(()=>Object.values(i.providerManifests).filter(e=>!e.builtin&&(e.multi_instance||!v.value.find(r=>r.domain))).sort((e,r)=>(e.name||i.providerManifests[e.domain].name).toUpperCase()>(r.name||i.providerManifests[r.domain].name).toUpperCase()?1:-1)),E=i.subscribe(O.PROVIDERS_UPDATED,()=>{T()});q(E);const T=async function(){v.value=await i.getData("config/providers");const e=await i.getData("providers/available");for(const r of e)i.providerManifests[r.domain]=r},S=function(e){i.sendCommand("config/providers/remove",{instance_id:e}),v.value=v.value.filter(r=>r.instance_id!=e)},U=function(e){D.push(`/settings/editprovider/${e}`)},I=function(e){D.push(`/settings/addprovider/${e.domain}`)},N=function(e){const r={enabled:!e.enabled};i.sendCommand("config/providers/update",{instance_id:e.instance_id,update:r})},R=function(e){i.getData("config/providers/reload",{instance_id:e}).catch(r=>alert(r))};return G(()=>i.providers,e=>{e&&T()},{immediate:!0}),(e,r)=>(o(),p("section",null,[a(X,null,{default:n(()=>[v.value.filter(l=>l.type==s(V).MUSIC&&l.domain in s(i).providerManifests&&l.domain!="url").length==0?(o(),f(K,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:n(()=>[m("b",null,u(e.$t("settings.no_providers")),1),Z,b(" "+u(e.$t("settings.no_providers_detail")),1)]),_:1})):g("",!0),(o(!0),p($,null,M(s(V),l=>(o(),p("div",null,[a(z,{title:e.$t(`settings.${l}providers`),density:"compact"},null,8,["title"]),(o(!0),p($,null,M(v.value.filter(t=>t.type==l&&t.domain in s(i).providerManifests).sort((t,_)=>(t.name||s(i).providerManifests[t.domain].name).toUpperCase()>(_.name||s(i).providerManifests[_.domain].name).toUpperCase()?1:-1),t=>(o(),f(c,{key:t.instance_id,title:t.name||s(i).providerManifests[t.domain].name,subtitle:s(i).providerManifests[t.domain].description,onClick:_=>U(t.instance_id)},{prepend:n(()=>[a(w,{domain:t.domain,size:"40px",class:"listitem-thumb"},null,8,["domain"])]),append:n(()=>{var _;return[m("div",ee,[s(i).syncTasks.value.filter(d=>d.provider_instance==t.instance_id).length>0?(o(),p("div",te,[a(C,{location:"top end",origin:"end center"},{activator:n(({props:d})=>[a(h,y(d,{color:"grey"}),{default:n(()=>[b(" mdi-sync ")]),_:2},1040)]),default:n(()=>[m("span",null,u(e.$t("settings.sync_running")),1)]),_:1})])):g("",!0),t.enabled?t.last_error?(o(),p("div",ne,[a(C,{location:"top end",origin:"end center"},{activator:n(({props:d})=>[a(h,y(d,{color:"red"}),{default:n(()=>[b(" mdi-alert-circle ")]),_:2},1040)]),default:n(()=>[m("span",null,u(t.last_error),1)]),_:2},1024)])):(_=s(i).providers[t.instance_id])!=null&&_.available?g("",!0):(o(),p("div",ae,[a(C,{location:"top end",origin:"end center"},{activator:n(({props:d})=>[a(h,H(J(d)),{default:n(()=>[b(" mdi-timer-sand ")]),_:2},1040)]),default:n(()=>[m("span",null,u(e.$t("settings.not_loaded")),1)]),_:1})])):(o(),p("div",ie,[a(C,{location:"top end",origin:"end center"},{activator:n(({props:d})=>[a(h,y(d,{color:"grey"}),{default:n(()=>[b(" mdi-cancel ")]),_:2},1040)]),default:n(()=>[m("span",null,u(e.$t("settings.provider_disabled")),1)]),_:1})])),m("div",se,[a(Y,{location:"bottom end"},{activator:n(({props:d})=>[a(P,y({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},d,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:n(()=>[a(B,null,{default:n(()=>{var d;return[a(c,{title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:k=>U(t.instance_id)},null,8,["title","onClick"]),a(c,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:s(i).providerManifests[t.domain].builtin,onClick:k=>N(t)},null,8,["title","disabled","onClick"]),s(i).providerManifests[t.domain].documentation?(o(),f(c,{key:0,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:s(i).providerManifests[t.domain].documentation,target:"_blank"},null,8,["title","href"])):g("",!0),(d=s(i).providers[t.instance_id])!=null&&d.available&&l==s(V).MUSIC?(o(),f(c,{key:1,title:e.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:k=>s(i).startSync(void 0,[t.instance_id])},null,8,["title","onClick"])):g("",!0),!s(i).providerManifests[t.domain].builtin&&!s(i).providerManifests[t.domain].load_by_default?(o(),f(c,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:k=>S(t.instance_id)},null,8,["title","onClick"])):g("",!0),a(c,{title:e.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:k=>R(t.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128)),oe]))),256)),a(Q,{scrim:!0},{activator:n(({props:l})=>[a(P,y({color:"primary",icon:"mdi-plus",size:"x-large",position:"fixed",location:"bottom right",elevation:"8",style:{"margin-bottom":"180px","margin-right":"15px","z-index":"9999"}},l),null,16)]),default:n(()=>[a(z,{dark:""},{default:n(()=>[a(P,{icon:"mdi-play-circle-outline"}),a(W,{style:{"padding-left":"10px"}},{default:n(()=>[m("b",null,u(e.$t("settings.add_provider")),1)]),_:1})]),_:1}),a(B,null,{default:n(()=>[(o(!0),p($,null,M(s(x),l=>(o(),f(c,{key:l.domain,title:l.name,onClick:t=>I(l)},{prepend:n(()=>[a(w,{domain:l.domain,size:26,class:"listitem-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}});export{ke as default};
