import{d as w,e as x,r as z,n as a,V as D,A as L,z as U,h as n,q as c,b as s,w as i,l as d,F as A,x as F,i as _,k as o,m as C,j as h,v as $,ax as M,ay as R,p as y}from"./index-f1dee0d3.js";import{_ as I}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-cefd281b.js";import{c as j,V as p}from"./VCardText-b7410ff5.js";import{V as g}from"./VTooltip-1f2ee323.js";import{V as P,a as q}from"./VBtn-2a3e9582.js";import{V as G}from"./VMenu-77bf6b7b.js";import{V as O}from"./forwardRefs-04f528d1.js";import"./VDivider-13a522b9.js";const S={class:"listitem-actions"},Y={key:0,class:"listitem-action"},H={key:1,class:"listitem-action"},J={class:"listitem-action"},se=w({__name:"Players",setup(K){const B=x(),m=z([]),N=a.subscribe_multi([D.PLAYER_CONFIG_UPDATED],()=>{f()});L(N);const f=async function(){m.value=await a.getData("config/players")},E=function(e){a.sendCommand("config/players/remove",{player_id:e}),m.value=m.value.filter(r=>r.player_id!=e)},k=function(e){e in a.players&&B.push(`/settings/editplayer/${e}`)},T=function(e){const r={enabled:!e.enabled};a.sendCommand("config/players/update",{player_id:e.player_id,update:r})},v=function(e){var r;return e.name||((r=a.players[e.player_id])==null?void 0:r.display_name)||e.default_name||e.player_id};return U(()=>a.players,e=>{e&&f()},{immediate:!0}),(e,r)=>(n(),c("section",null,[s(j,null,{default:i(()=>[d("div",null,[(n(!0),c(A,null,F([...m.value].sort((t,u)=>v(t).toUpperCase()>v(u).toUpperCase()?1:-1),t=>{var u;return n(),_(p,{key:t.player_id,title:v(t),subtitle:((u=o(a).providers[t.provider])==null?void 0:u.name)||t.provider,onClick:b=>k(t.player_id)},{prepend:i(()=>[s(I,{domain:t.provider,size:"40px",class:"listitem-thumb"},null,8,["domain"])]),append:i(()=>{var b;return[d("div",S,[t.enabled?(b=o(a).players[t.player_id])!=null&&b.available?y("",!0):(n(),c("div",H,[s(g,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[s(P,M(R(l)),{default:i(()=>[h(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>[d("span",null,$(e.$t("settings.player_not_available")),1)]),_:1})])):(n(),c("div",Y,[s(g,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[s(P,C(l,{color:"grey"}),{default:i(()=>[h(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[d("span",null,$(e.$t("settings.player_disabled")),1)]),_:1})])),d("div",J,[s(G,{location:"bottom end"},{activator:i(({props:l})=>[s(q,C({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},l,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[s(O,null,{default:i(()=>{var l;return[t.enabled&&t.player_id in o(a).players?(n(),_(p,{key:0,title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:V=>k(t.player_id)},null,8,["title","onClick"])):y("",!0),s(p,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cog",onClick:V=>T(t)},null,8,["title","onClick"]),o(a).providerManifests[t.provider].documentation?(n(),_(p,{key:1,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:o(a).providerManifests[t.provider].documentation,target:"_blank"},null,8,["title","href"])):y("",!0),(l=o(a).players[t.player_id])!=null&&l.available?y("",!0):(n(),_(p,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:V=>E(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{se as default};
