import{P as S}from"./ListviewItem-e9733249.js";import{g as G,b as r,d as E,r as P,G as Y,e as q,z as K,A as Q,s as h,c as R,h as l,q as c,w as i,i as s,p as m,k as u,N as H,l as g,j as p,v as d,F as I,x as M,m as J,n as F,Q as N}from"./index-946225fb.js";import{_ as D,b as U}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-062aadee.js";import{g as O,b as W}from"./MediaItemContextMenu.vue_vue_type_style_index_0_lang-15984079.js";import{b as X,a as j,c as Z,V as _}from"./VCardText-9ec5aee1.js";import{b as ee,V as b,a as B,c as te}from"./VCard-ae203615.js";import{u as ie,V as k,a as w,l as ae}from"./VBtn-1bbc641f.js";import{V as le}from"./VMenu-6f8455d2.js";import{V as re}from"./forwardRefs-ace7e2dd.js";import{b as ne,c as oe}from"./layout-27a7ed62.js";import{V as me}from"./VDialog-b578bd5a.js";import{b as se}from"./VSelect-f2165273.js";const z=G()({name:"VLayout",props:ne(),setup(e,o){let{slots:y}=o;const{layoutClasses:x,layoutStyles:$,getLayoutItem:L,items:V,layoutRef:T}=oe(e);return ie(()=>{var v;return r("div",{ref:T,class:x.value,style:$.value},[(v=y.default)==null?void 0:v.call(y)])}),{getLayoutItem:L,items:V}}}),de={key:0,xs5:"","pa-5":"",style:{width:"230px",height:"230px","margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},ue={key:0},ce={key:1},ye={style:{"padding-bottom":"10px"}},fe=["onClick"],ge={style:{color:"primary"}},pe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},be=["innerHTML"],ve={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},he={style:{position:"absolute",float:"right",right:"15px",top:"15px"}},Re=E({__name:"InfoHeader",props:{item:null},setup(e){const o=e,y=P(!1),x=P(),{mobile:$}=Y(),L=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,V=q();K(()=>o.item,async t=>{t&&(h.topBarTitle=t.name,x.value=await U(o.item,N.FANART)||await U(o.item,N.THUMB),h.topBarContextMenuItems=W([t],t))},{immediate:!0}),Q(()=>{h.topBarContextMenuItems=[]});const T=function(t){V.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},v=function(t){console.log("artistClick",t),V.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},C=R(()=>{let t="";return o.item?(o.item.metadata&&o.item.metadata.description?t=o.item.metadata.description:o.item.metadata&&o.item.metadata.copyright?t=o.item.metadata.copyright:"artists"in o.item&&o.item.artists.forEach(function(n){"metadata"in n&&n.metadata.description&&(t=n.metadata.description)}),t=t.replace(`\r
`,"<br /><br /><br />"),t=t.replace("\r","<br /><br />"),t=t.replace(`
`,"<br /><br />"),t):""}),A=R(()=>{const t=$.value?160:260;return C.value.length>t?C.value.substring(0,t)+"...":C.value});return(t,n)=>(l(),c("div",null,[r(B,{variant:"flat",img:u(L),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?m("",!0):(l(),s(ae,{key:0,indeterminate:""})),r(X,{width:"100%",height:"100%",cover:"",class:"background-image",src:x.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(l(),s(z,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[t.$vuetify.display.mobile?m("",!0):(l(),c("div",de,[e.item.media_type&&(e.item.media_type==u(H).ARTIST||"owner"in e.item)?(l(),c("div",ue,[r(j,{size:"192"},{default:i(()=>[r(D,{item:e.item,height:"230px",width:"230px"},null,8,["item"])]),_:1})])):(l(),c("div",ce,[r(D,{width:"230px",item:e.item},null,8,["item"])]))])),g("div",null,[r(ee,null,{default:i(()=>[p(d(e.item.name),1)]),_:1}),g("div",ye,["version"in e.item&&e.item.version?(l(),s(b,{key:0,class:"caption"},{default:i(()=>[p(d(e.item.version),1)]),_:1})):m("",!0),"artists"in e.item&&e.item.artists?(l(),s(b,{key:1,class:"title accent--text"},{default:i(()=>[r(k,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(l(!0),c(I,null,M(e.item.artists,(a,f)=>(l(),c("span",{key:a.item_id},[g("a",{style:{color:"accent"},onClick:ke=>v(a)},d(a.name),9,fe),f+1<e.item.artists.length?(l(),c("span",{key:f,style:{color:"accent"}},d(" / "))):m("",!0)]))),128))]),_:1})):m("",!0),"artist"in e.item&&e.item.artist?(l(),s(b,{key:2,class:"title"},{default:i(()=>[r(k,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),g("a",{onClick:n[0]||(n[0]=a=>v(e.item.artist))},d(e.item.artist.name),1)]),_:1})):m("",!0),"owner"in e.item&&e.item.owner?(l(),s(b,{key:3,class:"title"},{default:i(()=>[r(k,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),g("a",ge,d(e.item.owner),1)]),_:1})):m("",!0),"album"in e.item&&e.item.album?(l(),s(b,{key:4},{default:i(()=>[r(k,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),g("a",{style:{color:"secondary"},onClick:n[1]||(n[1]=a=>{var f;return T((f=e.item)==null?void 0:f.album)})},d(e.item.album.name),1)]),_:1})):m("",!0)]),g("div",pe,[r(le,{location:"bottom"},{activator:i(({props:a})=>{var f;return[r(w,J({color:"primary"},a,{"prepend-icon":"mdi-play-circle",disabled:!((f=u(h).selectedPlayer)!=null&&f.available)||u(h).blockGlobalPlayMenu}),{default:i(()=>[p(d(t.$t("play")),1)]),_:2},1040,["disabled"])]}),default:i(()=>[r(B,{"min-width":"300"},{default:i(()=>[r(re,{lines:"one",density:"comfortable"},{default:i(()=>[(l(!0),c(I,null,M(u(O)([e.item]),a=>(l(),s(_,{key:a.label,title:t.$t(a.label,a.labelArgs),onClick:f=>a.action?a.action():""},{prepend:i(()=>[r(j,{style:{"padding-right":"10px"}},{default:i(()=>[r(k,{icon:a.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1}),!t.$vuetify.display.mobile&&!e.item.in_library?(l(),s(w,{key:0,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart-outline",onClick:n[2]||(n[2]=a=>u(F).addItemsToLibrary([e.item]))},{default:i(()=>[p(d(t.$t("add_library")),1)]),_:1})):m("",!0),!t.$vuetify.display.mobile&&e.item.in_library?(l(),s(w,{key:1,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart",onClick:n[3]||(n[3]=a=>u(F).removeItemsFromLibrary([e.item]))},{default:i(()=>[p(d(t.$t("remove_library")),1)]),_:1})):m("",!0)]),u(A)?(l(),s(b,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:n[4]||(n[4]=a=>y.value=!y.value)},{default:i(()=>[g("div",{innerHTML:u(A)},null,8,be)]),_:1})):m("",!0),e.item&&e.item.metadata.genres?(l(),c("div",ve,[(l(!0),c(I,null,M(e.item.metadata.genres.slice(0,t.$vuetify.display.mobile?15:25),a=>(l(),s(se,{key:a,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[p(d(a),1)]),_:2},1024))),128))])):m("",!0)])]),_:1})):m("",!0),e.item?(l(),s(z,{key:2,style:{"z-index":"800",height:"100%","padding-left":"15px"}},{default:i(()=>[g("div",he,[r(S,{"provider-mappings":e.item.provider_mappings,height:25,"enable-details":!0,"enable-preview":e.item.media_type==u(H).TRACK},null,8,["provider-mappings","enable-preview"])])]),_:1})):m("",!0)]),_:1},8,["img"]),r(me,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=a=>y.value=a),width:"auto"},{default:i(()=>[r(B,null,{default:i(()=>[r(Z,{innerHTML:u(C)},null,8,["innerHTML"]),r(te,null,{default:i(()=>[r(w,{color:"primary",block:"",onClick:n[5]||(n[5]=a=>y.value=!1)},{default:i(()=>[p(d(t.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Re as _};
