/* empty css                             */import{d as A,e as L,r as j,c as F,n as a,V as O,A as q,z as G,h as o,q as m,b as n,w as i,k as s,ax as V,i as _,l as c,v as p,j as b,p as f,F as C,x as M,m as g,ay as H,az as J}from"./index-0a8872de.js";import{_ as w}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-eec372d7.js";import{V as K}from"./VAlert-92b53d41.js";import{V as Q}from"./VDialog-01e57aed.js";import{a as P,V as k}from"./VBtn-72c7b843.js";import{V as B,b as W}from"./VToolbar-4354d713.js";import{a as x,V as h}from"./VTooltip-032d4283.js";import{c as X,V as u}from"./VCardText-b9ca7517.js";import{V as Y}from"./VMenu-ed6c546a.js";import"./VDivider-2e2aca27.js";const Z=c("br",null,null,-1),ee={class:"listitem-actions"},te={key:0,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:1,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ae={key:3,class:"listitem-action",style:{"margin-right":"15px"}},se={class:"listitem-action"},oe=c("br",null,null,-1),ye=A({__name:"Providers",setup(re){const z=L(),v=j([]),E=F(()=>Object.values(a.providerManifests).filter(e=>!e.builtin&&(e.multi_instance||!v.value.find(d=>d.domain)))),S=a.subscribe(O.PROVIDERS_UPDATED,()=>{D()});q(S);const D=async function(){v.value=await a.getData("config/providers");const e=await a.getData("providers/available");for(const d of e)a.providerManifests[d.domain]=d},I=function(e){a.sendCommand("config/providers/remove",{instance_id:e}),v.value=v.value.filter(d=>d.instance_id!=e)},T=function(e){z.push(`/settings/editprovider/${e}`)},N=function(e){z.push(`/settings/addprovider/${e.domain}`)},R=function(e){const d={enabled:!e.enabled};a.sendCommand("config/providers/update",{instance_id:e.instance_id,update:d})},U=function(e){a.getData("config/providers/reload",{instance_id:e}).catch(d=>alert(d))};return G(()=>a.providers,e=>{e&&D()},{immediate:!0}),(e,d)=>(o(),m("section",null,[n(X,null,{default:i(()=>[v.value.filter(r=>r.type==s(V).MUSIC&&r.domain in s(a).providerManifests&&r.domain!="url").length==0?(o(),_(K,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:i(()=>[c("b",null,p(e.$t("settings.no_providers")),1),Z,b(" "+p(e.$t("settings.no_providers_detail")),1)]),_:1})):f("",!0),(o(!0),m(C,null,M(s(V),r=>(o(),m("div",null,[n(B,{title:e.$t(`settings.${r}providers`),density:"compact"},null,8,["title"]),(o(!0),m(C,null,M(v.value.filter(t=>t.type==r&&t.domain in s(a).providerManifests),t=>(o(),_(u,{key:t.instance_id,title:t.name||s(a).providerManifests[t.domain].name,subtitle:s(a).providerManifests[t.domain].description,onClick:$=>T(t.instance_id)},{prepend:i(()=>[n(w,{domain:t.domain,size:"40px",class:"listitem-thumb"},null,8,["domain"])]),append:i(()=>{var $;return[c("div",ee,[s(a).syncTasks.value.filter(l=>l.provider_instance==t.instance_id).length>0?(o(),m("div",te,[n(h,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[n(k,g(l,{color:"grey"}),{default:i(()=>[b(" mdi-sync ")]),_:2},1040)]),default:i(()=>[c("span",null,p(e.$t("settings.sync_running")),1)]),_:1})])):f("",!0),t.enabled?t.last_error?(o(),m("div",ne,[n(h,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[n(k,g(l,{color:"red"}),{default:i(()=>[b(" mdi-alert-circle ")]),_:2},1040)]),default:i(()=>[c("span",null,p(t.last_error),1)]),_:2},1024)])):($=s(a).providers[t.instance_id])!=null&&$.available?f("",!0):(o(),m("div",ae,[n(h,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[n(k,H(J(l)),{default:i(()=>[b(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>[c("span",null,p(e.$t("settings.not_loaded")),1)]),_:1})])):(o(),m("div",ie,[n(h,{location:"top end",origin:"end center"},{activator:i(({props:l})=>[n(k,g(l,{color:"grey"}),{default:i(()=>[b(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[c("span",null,p(e.$t("settings.provider_disabled")),1)]),_:1})])),c("div",se,[n(Y,{location:"bottom end"},{activator:i(({props:l})=>[n(P,g({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},l,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[n(x,null,{default:i(()=>{var l;return[n(u,{title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:y=>T(t.instance_id)},null,8,["title","onClick"]),n(u,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:s(a).providerManifests[t.domain].builtin,onClick:y=>R(t)},null,8,["title","disabled","onClick"]),s(a).providerManifests[t.domain].documentation?(o(),_(u,{key:0,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:s(a).providerManifests[t.domain].documentation,target:"_blank"},null,8,["title","href"])):f("",!0),(l=s(a).providers[t.instance_id])!=null&&l.available&&r==s(V).MUSIC?(o(),_(u,{key:1,title:e.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:y=>s(a).startSync(void 0,[t.instance_id])},null,8,["title","onClick"])):f("",!0),!s(a).providerManifests[t.domain].builtin&&!s(a).providerManifests[t.domain].load_by_default?(o(),_(u,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:y=>I(t.instance_id)},null,8,["title","onClick"])):f("",!0),n(u,{title:e.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:y=>U(t.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128)),oe]))),256)),n(Q,{scrim:!0},{activator:i(({props:r})=>[n(P,g({color:"primary",icon:"mdi-plus",size:"x-large",position:"fixed",location:"bottom right",elevation:"8",style:{"margin-bottom":"180px","margin-right":"15px","z-index":"9999"}},r),null,16)]),default:i(()=>[n(B,{dark:""},{default:i(()=>[n(P,{icon:"mdi-play-circle-outline"}),n(W,{style:{"padding-left":"10px"}},{default:i(()=>[c("b",null,p(e.$t("settings.add_provider")),1)]),_:1})]),_:1}),n(x,null,{default:i(()=>[(o(!0),m(C,null,M(s(E),r=>(o(),_(u,{key:r.domain,title:r.name,onClick:t=>N(r)},{prepend:i(()=>[n(w,{domain:r.domain,size:26,class:"listitem-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}});export{ye as default};
