
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ants.contrib.sampling.transforms &#8212; ANTsPy master documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for ants.contrib.sampling.transforms</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Various data augmentation transforms for ANTsImage types</span>

<span class="sd">List of Transformations:</span>
<span class="sd">======================</span>
<span class="sd">- CastIntensity</span>
<span class="sd">- BlurIntensity</span>
<span class="sd">- NormalizeIntensity</span>
<span class="sd">- RescaleIntensity</span>
<span class="sd">- ShiftScaleIntensity</span>
<span class="sd">- SigmoidIntensity</span>
<span class="sd">======================</span>
<span class="sd">- FlipImage</span>
<span class="sd">- TranslateImage</span>

<span class="sd">TODO</span>
<span class="sd">----</span>
<span class="sd">- RotateImage</span>
<span class="sd">- ShearImage</span>
<span class="sd">- ScaleImage</span>
<span class="sd">- DeformImage</span>
<span class="sd">- PadImage</span>
<span class="sd">- HistogramEqualizeIntensity</span>
<span class="sd">- TruncateIntensity</span>
<span class="sd">- SharpenIntensity</span>
<span class="sd">- MorpholigicalIntensity</span>
<span class="sd">    - MD</span>
<span class="sd">    - ME</span>
<span class="sd">    - MO</span>
<span class="sd">    - MC</span>
<span class="sd">    - GD</span>
<span class="sd">    - GE</span>
<span class="sd">    - GO</span>
<span class="sd">    - GC</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CastIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;BlurIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;LocallyBlurIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;NormalizeIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;RescaleIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;ShiftScaleIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;SigmoidIntensity&#39;</span><span class="p">,</span>
           <span class="s1">&#39;FlipImage&#39;</span><span class="p">,</span>
           <span class="s1">&#39;ScaleImage&#39;</span><span class="p">,</span>
           <span class="s1">&#39;TranslateImage&#39;</span><span class="p">,</span>
           <span class="s1">&#39;MultiResolutionImage&#39;</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">...</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">...core</span> <span class="kn">import</span> <span class="n">ants_image</span> <span class="k">as</span> <span class="n">iio</span>


<div class="viewcode-block" id="MultiResolutionImage"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.MultiResolutionImage">[docs]</a><span class="k">class</span> <span class="nc">MultiResolutionImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a set of images at multiple resolutions from an original image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">keep_shape</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="o">=</span> <span class="n">levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keep_shape</span> <span class="o">=</span> <span class="n">keep_shape</span>

<div class="viewcode-block" id="MultiResolutionImage.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.MultiResolutionImage.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a set of multi-resolution ANTsImage types</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; multires = ants.contrib.MultiResolutionImage(levels=4)</span>
<span class="sd">        &gt;&gt;&gt; img = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; imgs = multires.transform(img)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">multires_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;multiResolutionAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptrs</span> <span class="o">=</span> <span class="n">multires_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">)</span>
        
        <span class="n">imgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">casted_ptr</span> <span class="ow">in</span> <span class="n">casted_ptrs</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                                <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_shape</span><span class="p">:</span>
                <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">resample_image_to_target</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="n">imgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">imgs</span></div></div>


<span class="c1">## Intensity Transforms ##</span>

<div class="viewcode-block" id="CastIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.CastIntensity">[docs]</a><span class="k">class</span> <span class="nc">CastIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cast the pixeltype of an ANTsImage to a given type. </span>
<span class="sd">    This code uses the C++ ITK library directly, so it is fast.</span>
<span class="sd">    </span>
<span class="sd">    NOTE: This offers a ~2.5x speedup over using img.clone(pixeltype):</span>
<span class="sd">    </span>
<span class="sd">    Timings vs Cloning</span>
<span class="sd">    ------------------</span>
<span class="sd">    &gt;&gt;&gt; import ants</span>
<span class="sd">    &gt;&gt;&gt; import time</span>
<span class="sd">    &gt;&gt;&gt; caster = ants.contrib.CastIntensity(&#39;float&#39;)</span>
<span class="sd">    &gt;&gt;&gt; img = ants.image_read(ants.get_data(&#39;mni&#39;)).clone(&#39;unsigned int&#39;)</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(1000):</span>
<span class="sd">    ...     img_float = caster.transform(img)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 9.6s</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(1000):</span>
<span class="sd">    ...     img_float = img.clone(&#39;float&#39;)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 25.3s</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixeltype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a CastIntensity transform</span>
<span class="sd">    </span>
<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        pixeltype : string</span>
<span class="sd">            pixeltype to which images will be casted</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; caster = ants.contrib.CastIntensity(&#39;float&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">=</span> <span class="n">pixeltype</span>

<div class="viewcode-block" id="CastIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.CastIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by casting its type</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to cast</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to cast.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; caster = ants.contrib.CastIntensity(&#39;float&#39;)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;)).clone(&#39;unsigned int&#39;)</span>
<span class="sd">        &gt;&gt;&gt; img2d_float = caster.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; print(img2d.pixeltype, &#39;- &#39;, img2d_float.pixeltype)</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;)).clone(&#39;unsigned int&#39;)</span>
<span class="sd">        &gt;&gt;&gt; img3d_float = caster.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; print(img3d.pixeltype, &#39; - &#39; , img3d_float.pixeltype)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">outsuffix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">short_ptype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">),</span> <span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">)</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;castAntsImage</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">,</span> <span class="n">outsuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="BlurIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.BlurIntensity">[docs]</a><span class="k">class</span> <span class="nc">BlurIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform for blurring the intensity of an ANTsImage</span>
<span class="sd">    using a Gaussian Filter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a BlurIntensity transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        sigma : float</span>
<span class="sd">            variance of gaussian kernel intensity</span>
<span class="sd">            increasing this value increasing the amount</span>
<span class="sd">            of blur</span>

<span class="sd">        width : int</span>
<span class="sd">            width of gaussian kernel shape</span>
<span class="sd">            increasing this value increase the number of</span>
<span class="sd">            neighboring voxels which are used for blurring</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; blur = ants.contrib.BlurIntensity(2,3)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="n">sigma</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>

<div class="viewcode-block" id="BlurIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.BlurIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Blur an image by applying a gaussian filter.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; blur = ants.contrib.BlurIntensity(2,3)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_b = blur.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d_b)</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_b = blur.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d_b)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;blurAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">,</span>
                             <span class="n">origin</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LocallyBlurIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.LocallyBlurIntensity">[docs]</a><span class="k">class</span> <span class="nc">LocallyBlurIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Blur an ANTsImage locally using a gradient anisotropic</span>
<span class="sd">    diffusion filter, thereby preserving the sharpeness of edges as best </span>
<span class="sd">    as possible.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conductance</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">iters</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conductance</span> <span class="o">=</span> <span class="n">conductance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iters</span> <span class="o">=</span> <span class="n">iters</span>

<div class="viewcode-block" id="LocallyBlurIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.LocallyBlurIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Locally blur an image by applying a gradient anisotropic diffusion filter.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; blur = ants.contrib.LocallyBlurIntensity(1,5)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_b = blur.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d_b)</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_b = blur.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d_b)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if X.pixeltype != &#39;float&#39;:</span>
        <span class="c1">#    raise ValueError(&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;)</span>
        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;locallyBlurAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conductance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="NormalizeIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.NormalizeIntensity">[docs]</a><span class="k">class</span> <span class="nc">NormalizeIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Normalize the intensity values of an ANTsImage to have</span>
<span class="sd">    zero mean and unit variance</span>

<span class="sd">    NOTE: this transform is more-or-less the same in speed</span>
<span class="sd">    as an equivalent numpy+scikit-learn solution.</span>

<span class="sd">    Timing vs Numpy+Scikit-Learn</span>
<span class="sd">    ----------------------------</span>
<span class="sd">    &gt;&gt;&gt; import ants</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from sklearn.preprocessing import StandardScaler</span>
<span class="sd">    &gt;&gt;&gt; import time</span>
<span class="sd">    &gt;&gt;&gt; img = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">    &gt;&gt;&gt; arr = img.numpy().reshape(1,-1)</span>
<span class="sd">    &gt;&gt;&gt; normalizer = ants.contrib.NormalizeIntensity()</span>
<span class="sd">    &gt;&gt;&gt; normalizer2 = StandardScaler()</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     img_scaled = normalizer.transform(img)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 3.3s</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     arr_scaled = normalizer2.fit_transform(arr)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 3.5s</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a NormalizeIntensity transform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="NormalizeIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.NormalizeIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by normalizing its intensity values to </span>
<span class="sd">        have zero mean and unit variance.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; normalizer = ants.contrib.NormalizeIntensity()</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = normalizer.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; print(img2d.mean(), &#39;,&#39;, img2d.std(), &#39; -&gt; &#39;, img2d_r.mean(), &#39;,&#39;, img2d_r.std())</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = normalizer.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; print(img3d.mean(), &#39;,&#39; , img3d.std(), &#39;,&#39;, &#39; -&gt; &#39;, img3d_r.mean(), &#39;,&#39; , img3d_r.std())  </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;normalizeAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RescaleIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.RescaleIntensity">[docs]</a><span class="k">class</span> <span class="nc">RescaleIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rescale the pixeltype of an ANTsImage linearly to be between a given</span>
<span class="sd">    minimum and maximum value. </span>
<span class="sd">    This code uses the C++ ITK library directly, so it is fast.</span>
<span class="sd">    </span>
<span class="sd">    NOTE: this offered a ~5x speedup over using built-in arithmetic operations in ANTs.</span>
<span class="sd">    It is also more-or-less the same in speed as an equivalent numpy+scikit-learn</span>
<span class="sd">    solution.</span>

<span class="sd">    Timing vs Built-in Operations</span>
<span class="sd">    -----------------------------</span>
<span class="sd">    &gt;&gt;&gt; import ants</span>
<span class="sd">    &gt;&gt;&gt; import time</span>
<span class="sd">    &gt;&gt;&gt; rescaler = ants.contrib.RescaleIntensity(0,1)</span>
<span class="sd">    &gt;&gt;&gt; img = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     img_float = rescaler.transform(img)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 2.8s</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     maxval = img.max()</span>
<span class="sd">    ...     img_float = (img - maxval) / (maxval - img.min())</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 13.9s</span>

<span class="sd">    Timing vs Numpy+Scikit-Learn</span>
<span class="sd">    ----------------------------</span>
<span class="sd">    &gt;&gt;&gt; import ants</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from sklearn.preprocessing import MinMaxScaler</span>
<span class="sd">    &gt;&gt;&gt; import time</span>
<span class="sd">    &gt;&gt;&gt; img = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">    &gt;&gt;&gt; arr = img.numpy().reshape(1,-1)</span>
<span class="sd">    &gt;&gt;&gt; rescaler = ants.contrib.RescaleIntensity(-1,1)</span>
<span class="sd">    &gt;&gt;&gt; rescaler2 = MinMaxScaler((-1,1)).fit(arr)</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     img_scaled = rescaler.transform(img)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 2.8s</span>
<span class="sd">    &gt;&gt;&gt; s = time.time()</span>
<span class="sd">    &gt;&gt;&gt; for i in range(100):</span>
<span class="sd">    ...     arr_scaled = rescaler2.transform(arr)</span>
<span class="sd">    &gt;&gt;&gt; e = time.time()</span>
<span class="sd">    &gt;&gt;&gt; print(e - s) # 3s</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a RescaleIntensity transform.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        min_val : float</span>
<span class="sd">            minimum value to which image(s) will be rescaled</span>

<span class="sd">        max_val : float</span>
<span class="sd">            maximum value to which image(s) will be rescaled</span>
<span class="sd">        </span>
<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; rescaler = ants.contrib.RescaleIntensity(0,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_val</span> <span class="o">=</span> <span class="n">min_val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_val</span> <span class="o">=</span> <span class="n">max_val</span>

<div class="viewcode-block" id="RescaleIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.RescaleIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by linearly rescaling its intensity to</span>
<span class="sd">        be between a minimum and maximum value</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; rescaler = ants.contrib.RescaleIntensity(0,1)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = rescaler.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; print(img2d.min(), &#39;,&#39;, img2d.max(), &#39; -&gt; &#39;, img2d_r.min(), &#39;,&#39;, img2d_r.max())</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = rescaler.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; print(img3d.min(), &#39;,&#39; , img3d.max(), &#39; -&gt; &#39;, img3d_r.min(), &#39;,&#39; , img3d_r.max())</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;rescaleAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_val</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ShiftScaleIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.ShiftScaleIntensity">[docs]</a><span class="k">class</span> <span class="nc">ShiftScaleIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shift and scale the intensity of an ANTsImage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shift</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a ShiftScaleIntensity transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        shift : float</span>
<span class="sd">            shift all of the intensity values by the given amount through addition.</span>
<span class="sd">            For example, if the minimum image value is 0.0 and the shift</span>
<span class="sd">            is 10.0, then the new minimum value (before scaling) will be 10.0</span>

<span class="sd">        scale : float</span>
<span class="sd">            scale all the intensity values by the given amount through multiplication.</span>
<span class="sd">            For example, if the min/max image values are 10/20 and the scale</span>
<span class="sd">            is 2.0, then then new min/max values will be 20/40</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; shiftscaler = ants.contrib.ShiftScaleIntensity(shift=10, scale=2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shift</span> <span class="o">=</span> <span class="n">shift</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>

<div class="viewcode-block" id="ShiftScaleIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.ShiftScaleIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by shifting and scaling its intensity values.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; shiftscaler = ants.contrib.ShiftScaleIntensity(10,2.)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = shiftscaler.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; print(img2d.min(), &#39;,&#39;, img2d.max(), &#39; -&gt; &#39;, img2d_r.min(), &#39;,&#39;, img2d_r.max())</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = shiftscaler.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; print(img3d.min(), &#39;,&#39; , img3d.max(), &#39;,&#39;, &#39; -&gt; &#39;, img3d_r.min(), &#39;,&#39; , img3d_r.max())  </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;shiftScaleAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shift</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SigmoidIntensity"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.SigmoidIntensity">[docs]</a><span class="k">class</span> <span class="nc">SigmoidIntensity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform an image using a sigmoid function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a SigmoidIntensity transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        min_val : float</span>
<span class="sd">            minimum value</span>

<span class="sd">        max_val : float</span>
<span class="sd">            maximum value</span>

<span class="sd">        alpha : float</span>
<span class="sd">            alpha value for sigmoid</span>

<span class="sd">        beta : flaot</span>
<span class="sd">            beta value for sigmoid</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; sigscaler = ants.contrib.SigmoidIntensity(0,1,1,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_val</span> <span class="o">=</span> <span class="n">min_val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_val</span> <span class="o">=</span> <span class="n">max_val</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="n">beta</span>

<div class="viewcode-block" id="SigmoidIntensity.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.SigmoidIntensity.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by applying a sigmoid function.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; sigscaler = ants.contrib.SigmoidIntensity(0,1,1,1)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = sigscaler.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = sigscaler.transform(img3d)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;sigmoidAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<span class="c1">## Physical Transforms ##</span>

<div class="viewcode-block" id="FlipImage"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.FlipImage">[docs]</a><span class="k">class</span> <span class="nc">FlipImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform an image by flipping two axes. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis1</span><span class="p">,</span> <span class="n">axis2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a SigmoidIntensity transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        axis1 : int</span>
<span class="sd">            axis to flip</span>

<span class="sd">        axis2 : int</span>
<span class="sd">            other axis to flip</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; flipper = ants.contrib.FlipImage(0,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis1</span> <span class="o">=</span> <span class="n">axis1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis2</span> <span class="o">=</span> <span class="n">axis2</span>

<div class="viewcode-block" id="FlipImage.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.FlipImage.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform an image by applying a sigmoid function.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        X : ANTsImage</span>
<span class="sd">            image to transform</span>

<span class="sd">        y : ANTsImage (optional)</span>
<span class="sd">            another image to transform.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; flipper = ants.contrib.FlipImage(0,1)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = flipper.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d_r)</span>
<span class="sd">        &gt;&gt;&gt; flipper2 = ants.contrib.FlipImage(1,0)</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = flipper2.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d_r)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;flipAntsImage</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">,</span>
                             <span class="n">origin</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TranslateImage"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.TranslateImage">[docs]</a><span class="k">class</span> <span class="nc">TranslateImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Translate an image in physical space. This function calls </span>
<span class="sd">    highly optimized ITK/C++ code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a TranslateImage transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        translation : list, tuple, or numpy.ndarray</span>
<span class="sd">            absolute pixel transformation in each axis</span>

<span class="sd">        reference : ANTsImage (optional)</span>
<span class="sd">            image which provides the reference physical space in which</span>
<span class="sd">            to perform the transform</span>

<span class="sd">        interp : string</span>
<span class="sd">            type of interpolation to use</span>
<span class="sd">            options: linear, nearest</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; translater = ants.contrib.TranslateImage((10,10), interp=&#39;linear&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">interp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;nearest&#39;</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;interp must be one of {linear, nearest}&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">translation</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">translation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interp</span> <span class="o">=</span> <span class="n">interp</span>

<div class="viewcode-block" id="TranslateImage.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.TranslateImage.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; translater = ants.contrib.TranslateImage((40,0))</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = translater.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d, img2d_r)</span>
<span class="sd">        &gt;&gt;&gt; translater = ants.contrib.TranslateImage((40,0,0))</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = translater.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d, img3d_r, axis=2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">translation</span><span class="p">)</span> <span class="o">!=</span> <span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;must give a translation value for each image dimension&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">X</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;translateAntsImage</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interp</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="n">reference</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">translation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ScaleImage"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.ScaleImage">[docs]</a><span class="k">class</span> <span class="nc">ScaleImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Scale an image in physical space. This function calls </span>
<span class="sd">    highly optimized ITK/C++ code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a TranslateImage transform</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        scale : list, tuple, or numpy.ndarray</span>
<span class="sd">            relative scaling along each axis</span>

<span class="sd">        reference : ANTsImage (optional)</span>
<span class="sd">            image which provides the reference physical space in which</span>
<span class="sd">            to perform the transform</span>

<span class="sd">        interp : string</span>
<span class="sd">            type of interpolation to use</span>
<span class="sd">            options: linear, nearest</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; translater = ants.contrib.TranslateImage((10,10), interp=&#39;linear&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">interp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;nearest&#39;</span><span class="p">}:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;interp must be one of {linear, nearest}&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interp</span> <span class="o">=</span> <span class="n">interp</span>

<div class="viewcode-block" id="ScaleImage.transform"><a class="viewcode-back" href="../../../../ants.contrib.sampling.html#ants.contrib.sampling.transforms.ScaleImage.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        &gt;&gt;&gt; import ants</span>
<span class="sd">        &gt;&gt;&gt; scaler = ants.contrib.ScaleImage((1.2,1.2))</span>
<span class="sd">        &gt;&gt;&gt; img2d = ants.image_read(ants.get_data(&#39;r16&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img2d_r = scaler.transform(img2d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img2d, img2d_r)</span>
<span class="sd">        &gt;&gt;&gt; scaler = ants.contrib.ScaleImage((1.2,1.2,1.2))</span>
<span class="sd">        &gt;&gt;&gt; img3d = ants.image_read(ants.get_data(&#39;mni&#39;))</span>
<span class="sd">        &gt;&gt;&gt; img3d_r = scaler.transform(img3d)</span>
<span class="sd">        &gt;&gt;&gt; ants.plot(img3d, img3d_r)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span> <span class="o">!=</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;image.pixeltype must be float ... use TypeCast transform or clone to float&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span> <span class="o">!=</span> <span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;must give a scale value for each image dimension&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">X</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference</span>

        <span class="n">insuffix</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">_libsuffix</span>
        <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_lib_fn</span><span class="p">(</span><span class="s1">&#39;scaleAntsImage</span><span class="si">%s</span><span class="s1">_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insuffix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interp</span><span class="p">))</span>
        <span class="n">casted_ptr</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="n">reference</span><span class="o">.</span><span class="n">pointer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iio</span><span class="o">.</span><span class="n">ANTsImage</span><span class="p">(</span><span class="n">pixeltype</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">pixeltype</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">dimension</span><span class="p">,</span>
                             <span class="n">components</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">pointer</span><span class="o">=</span><span class="n">casted_ptr</span><span class="p">)</span></div></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/antspy-logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../../index.html">ANTsPy</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Package Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../registration.html">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../segmentation.html">Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../learn.html">Statistical Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vis.html">Visualization</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, ANTs Contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>