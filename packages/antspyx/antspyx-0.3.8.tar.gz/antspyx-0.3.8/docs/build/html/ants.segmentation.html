
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>ants.segmentation package &#8212; ANTsPy master documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ants-segmentation-package">
<h1>ants.segmentation package<a class="headerlink" href="#ants-segmentation-package" title="Permalink to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-ants.segmentation.anti_alias">
<span id="ants-segmentation-anti-alias-module"></span><h2>ants.segmentation.anti_alias module<a class="headerlink" href="#module-ants.segmentation.anti_alias" title="Permalink to this heading">¶</a></h2>
<p>Apply anti-alias filter on a binary ANTsImage</p>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.anti_alias.anti_alias">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.anti_alias.</span></span><span class="sig-name descname"><span class="pre">anti_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/anti_alias.html#anti_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.anti_alias.anti_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply Anti-Alias filter to a binary image</p>
<p>ANTsR function: N/A</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – binary image to which anti-aliasing will be applied</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage">ANTsImage</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="n">ants</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_mask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask_aa</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">anti_alias</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ants</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ants</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mask_aa</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.atropos">
<span id="ants-segmentation-atropos-module"></span><h2>ants.segmentation.atropos module<a class="headerlink" href="#module-ants.segmentation.atropos" title="Permalink to this heading">¶</a></h2>
<p>Atropos segmentation</p>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.atropos.atropos">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.atropos.</span></span><span class="sig-name descname"><span class="pre">atropos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Kmeans[3]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'[0.2,1x1]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'[5,0]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priorweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/atropos.html#atropos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.atropos.atropos" title="Permalink to this definition">¶</a></dt>
<dd><p>A finite mixture modeling (FMM) segmentation approach with possibilities
for specifying prior constraints. These prior constraints include the
specification of a prior label image, prior probability images (one for
each class), and/or an MRF prior to enforce spatial smoothing of the
labels. Similar algorithms include FAST and SPM. atropos can also perform
multivariate segmentation if you pass a list of images in: e.g. a=(img1,img2).</p>
<p>ANTsR function: <cite>atropos</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a><em> or </em><em>list/tuple</em><em> of </em><em>ANTsImage python:types</em>) – One or more scalar images to segment. If priors are not used,
the intensities of the first image are used to order the classes
in the segmentation output, from lowest to highest intensity. Otherwise
the order of the classes is dictated by the order of the prior images.</p></li>
<li><p><strong>x</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – mask image.</p></li>
<li><p><strong>i</strong> (<em>string</em>) – initialization usually KMeans[N] for N classes or a list of N prior
probability images. See Atropos in ANTs for full set of options.</p></li>
<li><p><strong>m</strong> (<em>string</em>) – mrf parameters as a string, usually “[smoothingFactor,radius]” where
smoothingFactor determines the amount of smoothing and radius determines
the MRF neighborhood, as an ANTs style neighborhood vector eg “1x1x1”
for a 3D image. The radius must match the dimensionality of the image,
eg 1x1 for 2D and The default in ANTs is smoothingFactor=0.3 and
radius=1. See Atropos for more options.</p></li>
<li><p><strong>c</strong> (<em>string</em>) – convergence parameters, “[numberOfIterations,convergenceThreshold]”.
A threshold of 0 runs the full numberOfIterations, otherwise Atropos
tests convergence by comparing the mean maximum posterior probability
over the whole region of interest defined by the mask x.</p></li>
<li><p><strong>priorweight</strong> (<em>scalar</em>) – usually 0 (priors used for initialization only), 0.25 or 0.5.</p></li>
<li><p><strong>kwargs</strong> (<em>keyword arguments</em>) – more parameters, see Atropos help in ANTs</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt><cite>segmentation</cite>: ANTsImage</dt><dd><p>actually segmented image</p>
</dd>
<dt><cite>probabilityimages</cite><span class="classifier">list of ANTsImage types</span></dt><dd><p>one image for each segmentation class</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary with the following key/value pairs</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">resample_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_mask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ants</span><span class="o">.</span><span class="n">atropos</span><span class="p">(</span> <span class="n">a</span> <span class="o">=</span> <span class="n">img</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="s1">&#39;[0.2,1x1]&#39;</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;[2,0]&#39;</span><span class="p">,</span>  <span class="n">i</span> <span class="o">=</span> <span class="s1">&#39;kmeans[3]&#39;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mask</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg2</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">atropos</span><span class="p">(</span> <span class="n">a</span> <span class="o">=</span> <span class="n">img</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="s1">&#39;[0.2,1x1]&#39;</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;[2,0]&#39;</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="n">seg</span><span class="p">[</span><span class="s1">&#39;probabilityimages&#39;</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mask</span><span class="p">,</span> <span class="n">priorweight</span><span class="o">=</span><span class="mf">0.25</span> <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.joint_label_fusion">
<span id="ants-segmentation-joint-label-fusion-module"></span><h2>ants.segmentation.joint_label_fusion module<a class="headerlink" href="#module-ants.segmentation.joint_label_fusion" title="Permalink to this heading">¶</a></h2>
<p>Joint Label Fusion algorithm</p>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.joint_label_fusion.joint_label_fusion">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.joint_label_fusion.</span></span><span class="sig-name descname"><span class="pre">joint_label_fusion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_image_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atlas_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rho</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usecor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonnegative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_zeroes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lab_plus_one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/joint_label_fusion.html#joint_label_fusion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.joint_label_fusion.joint_label_fusion" title="Permalink to this definition">¶</a></dt>
<dd><p>A multiple atlas voting scheme to customize labels for a new subject.
This function will also perform intensity fusion. It almost directly
calls the C++ in the ANTs executable so is much faster than other
variants in ANTsR.</p>
<p>One may want to normalize image intensities for each input image before
passing to this function. If no labels are passed, we do intensity fusion.
Note on computation time: the underlying C++ is multithreaded.
You can control the number of threads by setting the environment
variable ITK_GLOBAL_DEFAULT_NUMBER_OF_THREADS e.g. to use all or some
of your CPUs. This will improve performance substantially.
For instance, on a macbook pro from 2015, 8 cores improves speed by about 4x.</p>
<p>ANTsR function: <cite>jointLabelFusion</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – image to be approximated</p></li>
<li><p><strong>target_image_mask</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – mask with value 1</p></li>
<li><p><strong>atlas_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>ANTsImage python:types</em>) – list containing intensity images</p></li>
<li><p><strong>beta</strong> (<em>scalar</em>) – weight sharpness, default to 2</p></li>
<li><p><strong>rad</strong> (<em>scalar</em>) – neighborhood radius, default to 2</p></li>
<li><p><strong>label_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>ANTsImage python:types</em><em> (</em><em>optional</em><em>)</em>) – list containing images with segmentation labels</p></li>
<li><p><strong>rho</strong> (<em>scalar</em>) – ridge penalty increases robustness to outliers but also makes image converge to average</p></li>
<li><p><strong>usecor</strong> (<em>boolean</em>) – employ correlation as local similarity</p></li>
<li><p><strong>r_search</strong> (<em>scalar</em>) – radius of search, default is 3</p></li>
<li><p><strong>nonnegative</strong> (<em>boolean</em>) – constrain weights to be non-negative</p></li>
<li><p><strong>no_zeroes</strong> (<em>boolean</em>) – this will constrain the solution only to voxels that are always non-zero in the label list</p></li>
<li><p><strong>max_lab_plus_one</strong> (<em>boolean</em>) – this will add max label plus one to the non-zero parts of each label where the target mask
is greater than one.  NOTE: this will have a side effect of adding to the original label
images that are passed to the program.  It also guarantees that every position in the
labels have some label, rather than none.  Ie it guarantees to explicitly parcellate the
input data.</p></li>
<li><p><strong>output_prefix</strong> (<em>string</em>) – file prefix for storing output probabilityimages to disk</p></li>
<li><p><strong>verbose</strong> (<em>boolean</em>) – whether to show status updates</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt><cite>segmentation</cite><span class="classifier">ANTsImage</span></dt><dd><p>segmentation image</p>
</dd>
<dt><cite>intensity</cite><span class="classifier">ANTsImage</span></dt><dd><p>intensity image</p>
</dd>
<dt><cite>probabilityimages</cite><span class="classifier">list of ANTsImage types</span></dt><dd><p>probability map image for each label</p>
</dd>
<dt><cite>segmentation_numbers</cite><span class="classifier">list of numbers</span></dt><dd><p>segmentation label (number, int) for each probability map</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary w/ following key/value pairs</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">resample_image</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">iMath</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span><span class="s1">&#39;Normalize&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r27&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi2</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r30&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi3</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r62&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi4</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r64&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi5</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r85&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">refmask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_mask</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">refmask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">iMath</span><span class="p">(</span><span class="n">refmask</span><span class="p">,</span><span class="s1">&#39;ME&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># just to speed things up</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ilist</span> <span class="o">=</span> <span class="p">[</span><span class="n">mi</span><span class="p">,</span><span class="n">mi2</span><span class="p">,</span><span class="n">mi3</span><span class="p">,</span><span class="n">mi4</span><span class="p">,</span><span class="n">mi5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seglist</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ilist</span><span class="p">)):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">iMath</span><span class="p">(</span><span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;Normalize&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">mytx</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">registration</span><span class="p">(</span><span class="n">fixed</span><span class="o">=</span><span class="n">ref</span> <span class="p">,</span> <span class="n">moving</span><span class="o">=</span><span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">typeofTransform</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Affine&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">mywarpedimage</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">apply_transforms</span><span class="p">(</span><span class="n">fixed</span><span class="o">=</span><span class="n">ref</span><span class="p">,</span><span class="n">moving</span><span class="o">=</span><span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">transformlist</span><span class="o">=</span><span class="n">mytx</span><span class="p">[</span><span class="s1">&#39;fwdtransforms&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mywarpedimage</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">seg</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">threshold_image</span><span class="p">(</span><span class="n">ilist</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;Otsu&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">seglist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="n">seg</span> <span class="p">)</span> <span class="o">+</span> <span class="n">ants</span><span class="o">.</span><span class="n">threshold_image</span><span class="p">(</span> <span class="n">seg</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span><span class="o">.</span><span class="n">morphology</span><span class="p">(</span> <span class="n">operation</span><span class="o">=</span><span class="s1">&#39;dilate&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">3</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">joint_label_fusion</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">refmask</span><span class="p">,</span> <span class="n">ilist</span><span class="p">,</span> <span class="n">r_search</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="n">label_list</span><span class="o">=</span><span class="n">seglist</span><span class="p">,</span> <span class="n">rad</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">*</span><span class="n">ref</span><span class="o">.</span><span class="n">dimension</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">joint_label_fusion</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span><span class="n">refmask</span><span class="p">,</span><span class="n">ilist</span><span class="p">,</span> <span class="n">r_search</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rad</span><span class="o">=</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">*</span><span class="n">ref</span><span class="o">.</span><span class="n">dimension</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.joint_label_fusion.local_joint_label_fusion">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.joint_label_fusion.</span></span><span class="sig-name descname"><span class="pre">local_joint_label_fusion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which_labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atlas_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submask_dilation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_of_transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SyN'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aff_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meansquares'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">syn_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mattes'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">syn_sampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(40,</span> <span class="pre">20,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aff_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(500,</span> <span class="pre">50,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grad_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rho</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usecor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_search</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonnegative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_zeroes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lab_plus_one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_mask_transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Similarity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/joint_label_fusion.html#local_joint_label_fusion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.joint_label_fusion.local_joint_label_fusion" title="Permalink to this definition">¶</a></dt>
<dd><p>A local version of joint label fusion that focuses on a subset of labels.
This is primarily different from standard JLF because it performs
registration on the label subset and focuses JLF on those labels alone.</p>
<p>ANTsR function: <cite>localJointLabelFusion</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – image to be labeled</p></li>
<li><p><strong>which_labels</strong> (<em>numeric vector</em>) – label number(s) that exist(s) in both the template and library</p></li>
<li><p><strong>target_image_mask</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – a mask for the target image (optional), passed to joint fusion</p></li>
<li><p><strong>initial_label</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – initial label set, may be same labels as library or binary.
typically labels would be produced by a single deformable registration
or by manual labeling.</p></li>
<li><p><strong>atlas_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>ANTsImage python:types</em>) – list containing intensity images</p></li>
<li><p><strong>label_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> of </em><em>ANTsImage python:types</em><em> (</em><em>optional</em><em>)</em>) – list containing images with segmentation labels</p></li>
<li><p><strong>submask_dilation</strong> (<em>python:integer</em>) – amount to dilate initial mask to define region on which
we perform focused registration</p></li>
<li><p><strong>type_of_transform</strong> (<em>string</em>) – A linear or non-linear registration type. Mutual information metric by default.
See Notes below for more.</p></li>
<li><p><strong>aff_metric</strong> (<em>string</em>) – the metric for the affine part (GC, mattes, meansquares)</p></li>
<li><p><strong>syn_metric</strong> (<em>string</em>) – the metric for the syn part (CC, mattes, meansquares, demons)</p></li>
<li><p><strong>syn_sampling</strong> (<em>scalar</em>) – the nbins or radius parameter for the syn metric</p></li>
<li><p><strong>reg_iterations</strong> (<em>list/tuple</em><em> of </em><em>python:integers</em>) – vector of iterations for syn. we will set the smoothing and multi-resolution parameters based on the length of this vector.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>aff_iterations<span class="classifier">list/tuple of integers</span></dt><dd><p>vector of iterations for low-dimensional registration.</p>
</dd>
<dt>grad_step<span class="classifier">scalar</span></dt><dd><p>gradient step size (not for all tx)</p>
</dd>
<dt>flow_sigma<span class="classifier">scalar</span></dt><dd><p>smoothing for update field</p>
</dd>
<dt>total_sigma<span class="classifier">scalar</span></dt><dd><p>smoothing for total field</p>
</dd>
<dt>beta<span class="classifier">scalar</span></dt><dd><p>weight sharpness, default to 2</p>
</dd>
<dt>rad<span class="classifier">scalar</span></dt><dd><p>neighborhood radius, default to 2</p>
</dd>
<dt>rho<span class="classifier">scalar</span></dt><dd><p>ridge penalty increases robustness to outliers but also makes image converge to average</p>
</dd>
<dt>usecor<span class="classifier">boolean</span></dt><dd><p>employ correlation as local similarity</p>
</dd>
<dt>r_search<span class="classifier">scalar</span></dt><dd><p>radius of search, default is 3</p>
</dd>
<dt>nonnegative<span class="classifier">boolean</span></dt><dd><p>constrain weights to be non-negative</p>
</dd>
<dt>no_zeroes<span class="classifier">boolean</span></dt><dd><p>this will constrain the solution only to voxels that are always non-zero in the label list</p>
</dd>
<dt>max_lab_plus_one<span class="classifier">boolean</span></dt><dd><p>this will add max label plus one to the non-zero parts of each label where the target mask
is greater than one.  NOTE: this will have a side effect of adding to the original label
images that are passed to the program.  It also guarantees that every position in the
labels have some label, rather than none.  Ie it guarantees to explicitly parcellate the
input data.</p>
</dd>
<dt>local_mask_transform: string</dt><dd><p>the type of transform for the local mask alignment - usually translation,
rigid, similarity or affine.</p>
</dd>
<dt>output_prefix: string</dt><dd><p>file prefix for storing output probabilityimages to disk</p>
</dd>
<dt>verbose<span class="classifier">boolean</span></dt><dd><p>whether to show status updates</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt><cite>segmentation</cite><span class="classifier">ANTsImage</span></dt><dd><p>segmentation image</p>
</dd>
<dt><cite>intensity</cite><span class="classifier">ANTsImage</span></dt><dd><p>intensity image</p>
</dd>
<dt><cite>probabilityimages</cite><span class="classifier">list of ANTsImage types</span></dt><dd><p>probability map image for each label</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary w/ following key/value pairs</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ants.segmentation.kelly_kapowski">
<span id="ants-segmentation-kelly-kapowski-module"></span><h2>ants.segmentation.kelly_kapowski module<a class="headerlink" href="#module-ants.segmentation.kelly_kapowski" title="Permalink to this heading">¶</a></h2>
<p>Kelly Kapowski algorithm with computing cortical thickness</p>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.kelly_kapowski.kelly_kapowski">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.kelly_kapowski.</span></span><span class="sig-name descname"><span class="pre">kelly_kapowski</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">its</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">45</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.025</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/kelly_kapowski.html#kelly_kapowski"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.kelly_kapowski.kelly_kapowski" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute cortical thickness using the DiReCT algorithm.</p>
<p>Diffeomorphic registration-based cortical thickness based on probabilistic
segmentation of an image.  This is an optimization algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> (<em>ANTsimage</em>) – segmentation image</p></li>
<li><p><strong>g</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – gray matter probability image</p></li>
<li><p><strong>w</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – white matter probability image</p></li>
<li><p><strong>its</strong> (<em>python:integer</em>) – convergence params - controls iterations</p></li>
<li><p><strong>r</strong> (<em>scalar</em>) – gradient descent update parameter</p></li>
<li><p><strong>m</strong> (<em>scalar</em>) – gradient field smoothing parameter</p></li>
<li><p><strong>kwargs</strong> (<em>keyword arguments</em>) – anything else, see KellyKapowski help in ANTs</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage">ANTsImage</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">)</span> <span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">resample_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_mask</span><span class="p">(</span> <span class="n">img</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segs</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">kmeans_segmentation</span><span class="p">(</span> <span class="n">img</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">kmask</span> <span class="o">=</span> <span class="n">mask</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thick</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">kelly_kapowski</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segs</span><span class="p">[</span><span class="s1">&#39;segmentation&#39;</span><span class="p">],</span> <span class="n">g</span><span class="o">=</span><span class="n">segs</span><span class="p">[</span><span class="s1">&#39;probabilityimages&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
<span class="go">                                w=segs[&#39;probabilityimages&#39;][2], its=45,</span>
<span class="go">                                r=0.5, m=1)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.kmeans">
<span id="ants-segmentation-kmeans-module"></span><h2>ants.segmentation.kmeans module<a class="headerlink" href="#module-ants.segmentation.kmeans" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.kmeans.kmeans_segmentation">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.kmeans.</span></span><span class="sig-name descname"><span class="pre">kmeans_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kmask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/kmeans.html#kmeans_segmentation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.kmeans.kmeans_segmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>K-means image segmentation that is a wrapper around <cite>ants.atropos</cite></p>
<p>ANTsR function: <cite>kmeansSegmentation</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – input image</p></li>
<li><p><strong>k</strong> (<em>python:integer</em>) – integer number of classes</p></li>
<li><p><strong>kmask</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a><em> (</em><em>optional</em><em>)</em>) – segment inside this mask</p></li>
<li><p><strong>mrf</strong> (<em>scalar</em>) – smoothness, higher is smoother</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage">ANTsImage</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fi</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">),</span> <span class="s1">&#39;float&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fi</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">n3_bias_field_correction</span><span class="p">(</span><span class="n">fi</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">kmeans_segmentation</span><span class="p">(</span><span class="n">fi</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.label_geometry_measures">
<span id="ants-segmentation-label-geometry-measures-module"></span><h2>ants.segmentation.label_geometry_measures module<a class="headerlink" href="#module-ants.segmentation.label_geometry_measures" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.label_geometry_measures.label_geometry_measures">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.label_geometry_measures.</span></span><span class="sig-name descname"><span class="pre">label_geometry_measures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/label_geometry_measures.html#label_geometry_measures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.label_geometry_measures.label_geometry_measures" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the ANTs funtion labelGeometryMeasures</p>
<p>ANTsR function: <cite>labelGeometryMeasures</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – image on which to compute geometry</p></li>
<li><p><strong>intensity_image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a><em> (</em><em>optional</em><em>)</em>) – image with intensity values</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fi</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span> <span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">kmeans_segmentation</span><span class="p">(</span> <span class="n">fi</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)[</span><span class="s1">&#39;segmentation&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">label_geometry_measures</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span><span class="n">fi</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.otsu">
<span id="ants-segmentation-otsu-module"></span><h2>ants.segmentation.otsu module<a class="headerlink" href="#module-ants.segmentation.otsu" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.otsu.otsu_segmentation">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.otsu.</span></span><span class="sig-name descname"><span class="pre">otsu_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/otsu.html#otsu_segmentation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.otsu.otsu_segmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Otsu image segmentation</p>
<p>This is a very fast segmentation algorithm good for quick explortation,
but does not return probability maps.</p>
<p>ANTsR function: <cite>thresholdImage(image, ‘Otsu’, k)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – input image</p></li>
<li><p><strong>k</strong> (<em>python:integer</em>) – integer number of classes. Note that a background class will
be added to this, so the resulting segmentation will
have k+1 unique values.</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – segment inside this mask</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage">ANTsImage</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mni</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="n">ants</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;mni&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">mni</span><span class="o">.</span><span class="n">otsu_segmentation</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1">#0=bg,1=csf,2=gm,3=wm</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation.prior_based_segmentation">
<span id="ants-segmentation-prior-based-segmentation-module"></span><h2>ants.segmentation.prior_based_segmentation module<a class="headerlink" href="#module-ants.segmentation.prior_based_segmentation" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="ants.segmentation.prior_based_segmentation.prior_based_segmentation">
<span class="sig-prename descclassname"><span class="pre">ants.segmentation.prior_based_segmentation.</span></span><span class="sig-name descname"><span class="pre">prior_based_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priorweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mrf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ants/segmentation/prior_based_segmentation.html#prior_based_segmentation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ants.segmentation.prior_based_segmentation.prior_based_segmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatial prior-based image segmentation.</p>
<p>Markov random field regularized, prior-based image segmentation that is a
wrapper around atropos (see ANTs and related publications).</p>
<p>ANTsR function: <cite>priorBasedSegmentation</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a><em> or </em><em>list/tuple</em><em> of </em><em>ANTsImage python:types</em>) – input image or image list for multivariate segmentation</p></li>
<li><p><strong>priors</strong> (<em>list/tuple</em><em> of </em><em>ANTsImage python:types</em>) – list of priors that cover the number of classes</p></li>
<li><p><strong>mask</strong> (<a class="reference internal" href="core.html#ants.core.ants_image.ANTsImage" title="ants.core.ants_image.ANTsImage"><em>ANTsImage</em></a>) – segment inside this mask</p></li>
<li><p><strong>prior_weight</strong> (<em>scalar</em>) – usually 0 (priors used for initialization only), 0.25 or 0.5.</p></li>
<li><p><strong>mrf</strong> (<em>scalar</em>) – regularization, higher is smoother, a numerical value in range 0.0 to 0.2</p></li>
<li><p><strong>iterations</strong> (<em>python:integer</em>) – maximum number of iterations.  could be a large value eg 25.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt><cite>segmentation</cite>: ANTsImage</dt><dd><p>actually segmented image</p>
</dd>
<dt><cite>probabilityimages</cite><span class="classifier">list of ANTsImage types</span></dt><dd><p>one image for each segmentation class</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary with the following key/value pairs</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ants</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fi</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">image_read</span><span class="p">(</span><span class="n">ants</span><span class="o">.</span><span class="n">get_ants_data</span><span class="p">(</span><span class="s1">&#39;r16&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">kmeans_segmentation</span><span class="p">(</span><span class="n">fi</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">threshold_image</span><span class="p">(</span><span class="n">seg</span><span class="p">[</span><span class="s1">&#39;segmentation&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1e15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">priorseg</span> <span class="o">=</span> <span class="n">ants</span><span class="o">.</span><span class="n">prior_based_segmentation</span><span class="p">(</span><span class="n">fi</span><span class="p">,</span> <span class="n">seg</span><span class="p">[</span><span class="s1">&#39;probabilityimages&#39;</span><span class="p">],</span> <span class="n">mask</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-ants.segmentation">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ants.segmentation" title="Permalink to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/antspy-logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">ANTsPy</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Package Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="segmentation.html">Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="learn.html">Statistical Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="vis.html">Visualization</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, ANTs Contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/ants.segmentation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>