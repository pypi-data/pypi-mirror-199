(self.webpackChunkipydatatable=self.webpackChunkipydatatable||[]).push([[261],{1568:(e,t,l)=>{e.exports=l(8051),e.exports.version=l(306).version},8051:(e,t,l)=>{try{window.$.fn.modal;var a=!1}catch{a=!0}console.log("Are we in JupyterLabssss: "+a);var o=l(1337);window.$=window.jQuery=l(6646),l(6299),window.pdfMake=l(1566);var d=l(7920);window.pdfMake.vfs=d.pdfMake.vfs,l(8725),l(1734),l(9661),l(4328),l(2481),l(6155),l(5924),l(130),l(7740),l(5253),l(7480);var n=l(8435),r=l(5431);a&&l(4588),l(6642),l(4211),l(5680),l(8752);var c=o.DOMWidgetModel.extend({defaults:r.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"InteractiveTableModel",_view_name:"InteractiveTableView",_model_module:"ipydatatable",_view_module:"ipydatatable",_model_module_version:"1.0.2",_view_module_version:"1.0.2"})}),s=o.DOMWidgetView.extend({createElements:function(e,t){return this.model.get("render_html")?(console.log(e),(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("body")[0].childNodes.forEach((e=>{console.log(e),t.appendChild(e)})),t):(t.appendChild(document.createTextNode(e)),t)},render:function(){var e=this;e.column_order=[],e.create_style_jinteractive();var t=e.model.get("table");e.selected_data=[],e.model.on("change:selected_index_row",this.selected_index_row_changed,this),e.model.on("change:selected_group",this.selected_group_changed,this),e.onclickRowSelection=!1,e.groupClick=!1,e.wrapper=document.createElement("div"),e.wrapper.id="wrapper_"+e.cid,e.wrapper.style.display="none",e.wrapper.style.width="100%",e.wrapper.style.setProperty("color","black","important"),e.wrapper.style.backgroundColor="white",e.tbl=document.createElement("table"),e.tbl.style.width="100%",e.tbl.style.setProperty("color","black","important"),e.tbl.style.wordWrap="break-word",e.tbl.id="example_"+e.cid,e.tbl.className="display",e.cols=[],e.dropdown=!1,e.columns=[""];var l=document.createElement("tbody");$.each(t,((t,a)=>{e.dropdown=!1;var o=document.createElement("tr");if(Object.keys(a).forEach((function(t){var l=document.createElement("td");if("string"==typeof a[t]||a[t]instanceof String)var d=a[t];else d=null==a[t]?"":a[t].toString();"group"==t?e.dropdown=!0:d.length>e.model.get("text_limit")?(e.dropdown=!0,e.cols.push("over_length"),l=e.createElements(d.replace("&lt;","<").replace("&gt;",">"),l)):l=e.createElements(d,l),e.cols.includes(t)||"group"==t||e.cols.push(t),"group"!=t&&o.appendChild(l)})),e.dropdown){var d=document.createElement("td");(d=e.createElements("+",d)).className="show_details",$(o).prepend(d)}else d=document.createElement("td"),$(o).prepend(d);l.appendChild(o)}));var o=document.createElement("thead"),d=document.createElement("tr"),r=!1;if($.each(e.cols,((t,l)=>{var a=document.createElement("th");"group"!=l&&"over_length"!=l?(e.columns.push(l),r=!0,a=e.createElements(l.replace("&lt;","<").replace("&gt;",">"),a),d.appendChild(a)):(r=!0,a.orderable=!1)})),r){var c=document.createElement("td");$(d).prepend(c)}o.appendChild(d),e.tbl.appendChild(o),e.tbl.appendChild(l),e.wrapper.appendChild(e.tbl),e.el.appendChild(this.wrapper),$(document).ready((function(){var l=function(){return $(window).height()-200};$(window).on("resize",(function(){screen.width===window.innerWidth?($("#example_"+e.cid+"_wrapper .dataTables_scrollBody").css("height",l()+"px").css("max-height",l()+"px"),console.log("1")):(console.log($("#example_"+e.cid+"_wrapper .dataTables_scrollBody")),$("#example_"+e.cid+"_wrapper .dataTables_scrollBody").css("height","400px").css("max-height","400px"),console.log("2"))})),$("#example_"+e.cid+" tbody").on("click","td.show_details",(function(){var t=e.table.columns().header().toArray().map((e=>e.innerText));"-"==e.table.cell(this).data()?e.table.cell(this).data("+"):e.table.cell(this).data("-");var l=$(this).closest("tr"),o=e.table.row(l);o.child.isShown()?(o.child.hide(),l.removeClass("shown")):(o.child(function(l,a){let o=e.model.get("child_group_select");var d=document.createElement("table");if(d.style.paddingLeft="50px",d.style.borderSpacing="0",o){var n=document.createElement("div");n.classList.add("btn-group"),n.classList.add("btn-group-toggle"),n.setAttribute("data-toggle","buttons")}$.each(l,((l,a)=>{if(a.length>e.model.get("text_limit")){let o=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td");n=e.createElements(t[l],n),r=e.createElements(a.replace("&lt;","<").replace("&gt;",">"),r),o.appendChild(n),o.appendChild(r),d.appendChild(o)}}));var r=e.model.get("table")[a];if(r.hasOwnProperty("group")&&$.each(r.group,((t,l)=>{if(o){let o=document.createElement("label");o.style.marginRight="10px";let d=document.createElement("input");d.setAttribute("type","checkbox"),d.setAttribute("name","options"),d.setAttribute("autocomplete","off"),d.setAttribute("id","group_"+e.cid+"_"+a);let r=[...e.model.get("selected_group")];$.each(r,(function(e,o){o==a+":"+t+":"+l&&(d.checked=!0)})),d.onclick=function(){let o=[...e.model.get("selected_group")];e.groupClick=!0,o.indexOf(a+":"+t+":"+l)<0?(o.push(a+":"+t+":"+l),e.model.set("selected_group",o),e.touch()):(o.splice(o.indexOf(a+":"+t+":"+l),1),e.model.set("selected_group",o),e.touch())},o.appendChild(d),o=e.createElements(" "+l.replace("&lt;","<").replace("&gt;",">"),o),n.appendChild(o)}else{let a=document.createElement("tr"),o=document.createElement("td"),n=document.createElement("td");o=e.createElements(t,o),n=e.createElements(l.replace(/&lt;/g,"<").replace(/&gt;/g,">"),n),a.appendChild(o),a.appendChild(n),d.appendChild(a)}})),o){let e=document.createElement("div");return e.appendChild(d),e.appendChild(n),e}return d}(o.data(),o.index())).show(),l.addClass("shown")),a||$(".group-buttons").click((function(){$(this).toggleClass("active")}))})),e.selected=[...e.model.get("selected_index_row")],$("#example_"+e.cid+" tbody").on("click","tr",(function(){console.log(e.table);var l=[];e.selected.includes(e.table.row(this).index())?e.selected.splice(e.selected.indexOf(e.table.row(this).index()),1):e.selected.push(e.table.row(this).index()),$.each(e.selected,((e,a)=>{l.push(t[a])})),e.onclickRowSelection=!0,e.touch(),e.model.set("selected_data",l),e.model.set("selected_index_row",[...e.selected]),e.touch()})),e.model.get("column_filter")&&(e.column_order.push(0),$("#example_"+e.cid+" thead tr").clone(!0).appendTo("#example_"+e.cid+" thead"),$("#example_"+e.cid+" thead tr:eq(1) th").each((function(t){var l=$(this).text();e.column_order.push(t+1),$(this).html('<input type="text" placeholder="Search '+l+'" />'),$("input",this).on("keyup change clear",(function(){e.table.column(e.column_order.indexOf(t+1)).search()!==this.value&&e.table.column(e.column_order.indexOf(t+1)).search(this.value).draw()}))})));var o=e.columns.indexOf(e.model.get("sort_column"))>-1?e.columns.indexOf(e.model.get("sort_column")):1,d=[];$.each(e.columns,((t,l)=>{""!=l&&("hide"==e.model.get("init_state")?e.model.get("columns").includes(l)&&d.push(t):e.model.get("columns").includes(l)||d.push(t))})),e.table=$("#example_"+e.cid).DataTable({dom:"Blfrtip",buttons:[{text:"Full Screen",action:function(t,l,a,o){n.isEnabled&&n.request($("#wrapper_"+e.cid)[0])}},{extend:"selectAll",action:function(t,l,a,o){var d=[];e.selected=[],l.rows().every((function(t,l,a){var o=this.data();e.selected.push(t),d.push(o)})),e.model.set("selected_data",d),e.model.set("selected_index_row",[...e.selected]),e.touch(),window.$.fn.dataTable.ext.buttons.selectAll.action.call(this,t,l,a,o)}},{extend:"selectNone",action:function(t,l,a,o){window.$.fn.dataTable.ext.buttons.selectNone.action.call(this,t,l,a,o),e.selected=[],e.model.set("selected_data",[]),e.model.set("selected_index_row",[]),e.touch()}},{extend:"colvis",columns:":not(.notToggleVis)"},"searchBuilder","copy","csv","excel","pdf","print"],orderCellsTop:!0,order:[[o,"desc"]],lengthMenu:[[10,25,50,100,500,-1],[10,25,50,100,500,"All"]],fixedHeader:!0,scrollY:400,scrollResize:!0,scrollCollapse:!0,scrollX:!0,select:{style:"multi"},colReorder:!0,columnDefs:[{width:10,targets:0,orderable:!1,className:"notToggleVis"},{targets:d,visible:!1},{targets:"_all",render:function(t,l,a){return t.length>e.model.get("text_limit")?t.substr(0,e.model.get("text_limit"))+"â€¦":t}}]}),$("#example_"+e.cid+" td").css("white-space","initial"),$("#example_"+e.cid+" td").css("word-break","break-word");let r=[];$.each(e.model.get("selected_index_row"),((t,l)=>{r.push(e.model.get("table")[l]),e.table.row(l).select()})),e.model.set("selected_data",r),e.touch(),e.table.on("column-reorder",(function(t,l,a){a.mapping;var o=[];$.each(l.aoColumns,((e,t)=>{o.push(t._ColReorder_iOrigCol)})),e.column_order=o})),e.wrapper.style.display="block",a&&(e.wrapper.style.width=document.getElementById("wrapper_"+e.cid).parentNode.parentNode.parentNode.parentElement.clientWidth-100+"px",e.wrapper.style.setProperty("color","black","important")),e.table.columns.adjust()}))},selected_group_changed:function(){let e=this,t=(e.model.get("selected_group"),$("#example_"+e.cid).DataTable());e.groupClick||(t.rows().every((function(e,l,a){let o=this.data();console.log("Data: ",o),"-"==o[0]&&(o[0]="+",this.data(o)),this.invalidate();let d=t.row(this).child;d.isShown()&&d.hide()})),t.rows(".selected").nodes().to$().removeClass("selected"),t.draw(),e.touch())},selected_index_row_changed:function(){let e=this;console.log(e.model.get("selected_index_row"));let t=$("#example_"+e.cid).DataTable(),l=[];e.onclickRowSelection?e.onclickRowSelection=!1:(console.log(t),t.rows(".selected").nodes().to$().removeClass("selected"),$.each(e.model.get("selected_index_row"),((a,o)=>{l.push(e.model.get("table")[o]),t.row(o).select()})),e.model.set("selected_data",l),e.touch()),e.groupClick=!1},create_style_jinteractive:function(){if(a)var e="Font Awesome 5 Free";else e="fontawesome";var t=`\n      div.dataTables_scrollHead table.dataTable thead th.sorting_asc::after,\n      div.dataTables_scrollHead table.dataTable thead th.sorting_desc::after {\n        content:"" !important;\n      }\n      div.dataTables_scrollHead table.dataTable thead .sorting:after {\n        content: "\\f0dc";\n        float: left;\n        font-family: '${e}';\n        padding-right:5px;\n      }\n      div.dataTables_scrollHead table.dataTable thead th.sorting_asc:after {\n        font-family: '${e}';\n        float: left;\n        content: "\\f0de" !important;\n        padding-right:5px;\n      }\n      div.dataTables_scrollHead table.dataTable thead th.sorting_desc:after {\n        font-family: '${e}';\n        float: left;\n        content: "\\f0dd" !important;\n        padding-right:5px;\n      }\n      div.dt-button-collection {\n        max-height: 200px !important;\n        overflow-y: auto !important;\n      }\n      `;this.style_context=document.createElement("style"),this.style_context.innerHTML=t,this.el.appendChild(this.style_context)}});e.exports={InteractiveTableModel:c,InteractiveTableView:s}},6261:(e,t,l)=>{var a=l(1568),o=l(1337);e.exports={id:"ipydatatable:plugin",requires:[o.IJupyterWidgetRegistry],activate:function(e,t){t.registerWidget({name:"ipydatatable",version:a.version,exports:a})},autoStart:!0}},306:e=>{"use strict";e.exports={version:"1.0.3"}}}]);