(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2369],{73579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=s.default,i=(null==t?void 0:t.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?i.loader=function(){return e}:"function"===typeof e?i.loader=e:"object"===typeof e&&(i=r({},i,e));if((i=r({},i,t)).suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");i.suspense&&(delete i.ssr,delete i.loading);i.loadableGenerated&&delete(i=r({},i,i.loadableGenerated)).loadableGenerated;if("boolean"===typeof i.ssr&&!i.suspense){if(!i.ssr)return delete i.ssr,a(n,i);delete i.ssr}return n(i)},t.noSSR=a;var r=n(6495).Z,i=n(92648).Z,s=(i(n(67294)),i(n(23668)));function a(e,t){return delete t.webpack,delete t.modules,e(t)}("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3982:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var r=(0,n(92648).Z)(n(67294)).default.createContext(null);t.LoadableContext=r},23668:function(e,t,n){"use strict";var r=n(33227),i=n(88361);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw s}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6495).Z,u=(0,n(92648).Z)(n(67294)),l=n(3982),c=n(61688).useSyncExternalStore,d=[],f=[],h=!1;function p(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}var x=function(){function e(t,n){r(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=o({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function v(e){return function(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},t);n.suspense&&(n.lazy=u.default.lazy(n.loader));var r=null;function i(){if(!r){var t=new x(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!h){var a=n.webpack?n.webpack():n.modules;a&&f.push((function(e){var t,n=s(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return i()}}catch(o){n.e(o)}finally{n.f()}}))}function d(){i();var e=u.default.useContext(l.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach((function(t){e(t)}))}var p=n.suspense?function(e,t){return d(),u.default.createElement(n.lazy,o({},e,{ref:t}))}:function(e,t){d();var i=c(r.subscribe,r.getCurrentValue,r.getCurrentValue);return u.default.useImperativeHandle(t,(function(){return{retry:r.retry}}),[]),u.default.useMemo((function(){return i.loading||i.error?u.default.createElement(n.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:r.retry}):i.loaded?u.default.createElement((t=i.loaded)&&t.__esModule?t.default:t,e):null;var t}),[e,i])};return p.preload=function(){return i()},p.displayName="LoadableComponent",u.default.forwardRef(p)}(p,e)}function m(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return m(e,t)}))}v.preloadAll=function(){return new Promise((function(e,t){m(d).then(e,t)}))},v.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return h=!0,t()};m(f,e).then(n,n)}))},window.__NEXT_PRELOADREADY=v.preloadReady;var y=v;t.default=y},68293:function(e,t,n){"use strict";var r=n(23256),i=n(43894),s=n(85893);t.Z=function(e){var t=e.page,n=e.size,a=e.total,o=e.handleNextPage,u=e.handlePreviousPage,l=(t-1)*n+1,c=Math.min(a,t*n);return(0,s.jsxs)(r.kC,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(r.xv,{fontSize:"xs",color:"gray.600",children:a>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(l)?0:l," to"," ",Number.isNaN(c)?0:c," of"," ",Number.isNaN(a)?0:a," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.zx,{disabled:t<=1,onClick:u,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(i.zx,{disabled:t*n>=a,onClick:o,size:"sm",children:"Next"})]})]})}},44068:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(16835),i=n(27812),s=n(23256),a=n(37991),o=n(77601),u=n(43894),l=n(48591),c=n(67294),d=n(12036),f=n(85893),h=function(e){var t=e.defaultValues,n=e.items,o=e.onSelection,l=(0,c.useState)(n),h=l[0],p=l[1];return(0,f.jsxs)(a.qy,{lineHeight:"1rem",p:"0",children:[(0,f.jsxs)(s.kC,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,f.jsx)(u.zx,{onClick:function(){p(n),o(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,f.jsx)(s.LZ,{}),(0,f.jsx)(u.zx,{backgroundColor:"primary.800",color:"white",onClick:function(){o(h)},size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,f.jsx)(s.xu,{maxH:"360px",overflow:"auto",children:(0,f.jsx)(d.cO,{colorScheme:"purple",defaultValue:t,onChange:function(e){var t=new Map(h);t.forEach((function(e,n){t.set(n,!1)})),e.forEach((function(e){t.set(e,!0)})),p(t)},children:(0,i.Z)(n).sort().map((function(e){var t=(0,r.Z)(e,1)[0];return(0,f.jsx)(a.sN,{paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,f.jsx)(d.XZ,{"aria-label":t,isChecked:n.get(t),spacing:".5rem",value:t,width:"100%",children:(0,f.jsx)(s.xv,{fontSize:"0.75rem",children:t})})},t)}))})})]})},p=function(e){var t=e.closeOnSelect,n=void 0!==t&&t,d=e.list,p=e.onChange,x=e.selectedList,v=e.label,m=e.tooltipDisabled,y=void 0!==m&&m,g=e.tooltipPlacement,j=void 0===g?"auto":g,b=e.width,C=new Map(d),S=(0,c.useState)(!1),_=S[0],w=S[1],k=function(){w(!1)},E=function(){return y?v:x.size>0?(0,i.Z)(x.keys()).sort().join(", "):v};return(0,f.jsx)(s.xu,{children:(0,f.jsxs)(a.v2,{closeOnSelect:n,isLazy:!0,onClose:k,onOpen:function(){w(!0)},strategy:"fixed",children:[(0,f.jsx)(o.u,{fontSize:".75rem",hasArrow:!0,"aria-label":"",label:E(),lineHeight:"1.25rem",isDisabled:y||!(x.size>0),placement:j,children:(0,f.jsxs)(a.j2,{"aria-label":E(),as:u.zx,fontWeight:"normal",rightIcon:(0,f.jsx)(l.mC,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},children:[!y&&(0,f.jsx)(s.xv,{display:"inline-block",isTruncated:!0,width:b,children:E()}),y&&(0,f.jsxs)(s.Ug,{children:[(0,f.jsx)(s.xv,{children:E()}),x.size>0&&(0,f.jsx)(s.xv,{color:"complimentary.500",children:x.size})]})]})}),_?(0,f.jsx)(h,{defaultValues:(0,i.Z)(x.keys()),items:C,onSelection:function(e){var t=new Map((0,i.Z)(e).filter((function(e){return!0===(0,r.Z)(e,2)[1]})));p((0,i.Z)(t.keys())),k()}}):null]})})}},83689:function(e,t,n){"use strict";n.d(t,{DE:function(){return s},MP:function(){return r},qX:function(){return i}});var r=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),i={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},s={local:"local",s3:"s3"}},60432:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(48057),i=n(23256),s=n(5152),a=n.n(s),o=n(67294),u=n(70783),l=n(70918),c=n(85893),d=n(16835),f=n(27812),h=n(59499),p=n(50029),x=n(87794),v=n.n(x),m=n(13450),y=n(30268),g=n(48591),j=n(43894),b=n(44068),C=n(26012),S=n(14416),_=n(37161),w=n(83689);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T,I=function(e){var t=e.revealPII,n=e.setRevealPII,r=function(e){var t=(0,S.useSelector)(l.dp),n=(0,S.useSelector)(_.rK),r=(0,S.useDispatch)(),i=(0,m.pm)(),s=(0,o.useCallback)((function(e){var t=[];e.forEach((function(e){w.MP.forEach((function(n,r){r===e&&t.push(n)}))})),r((0,l.CI)(t))}),[r]),a=function(){var e=(0,p.Z)(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.py)(E(E({},t),{},{token:n}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r=e.t0 instanceof Error?e.t0.message:"Unknown error occurred";case 8:r&&i({description:"".concat(r),duration:5e3,status:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),u=function(e){var t=new Map;return w.MP.forEach((function(n,r){var i=!1;e.includes(n)&&(i=!0),t.set(r,i)})),t},c=(0,o.useMemo)((function(){return u(t.status||[])}),[t.status]),h=new Map((0,f.Z)(c).filter((function(e){return!0===(0,d.Z)(e,2)[1]})));return E(E({handleSearchChange:function(e){return r((0,l.Nl)(e.target.value))},handleStatusChange:s,handleFromChange:function(e){return r((0,l.su)(null===e||void 0===e?void 0:e.target.value))},handleToChange:function(e){return r((0,l.Ue)(null===e||void 0===e?void 0:e.target.value))},handleClearAllFilters:function(){e(!1),r((0,l.Mk)())},handleDownloadClick:a,loadStatusList:u},t),{},{selectedStatusList:h,statusList:c})}(n),s=r.handleSearchChange,a=r.handleStatusChange,u=r.handleFromChange,h=r.handleToChange,x=r.handleClearAllFilters,k=r.handleDownloadClick,T=r.id,I=r.from,P=r.selectedStatusList,z=r.statusList,D=r.to;return(0,c.jsxs)(i.Kq,{direction:"row",mb:6,flexWrap:"wrap",gap:2,children:[(0,c.jsx)(b.Z,{label:"Select Status",list:z,selectedList:P,width:"144px",onChange:a,tooltipPlacement:"top"}),(0,c.jsxs)(y.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,c.jsx)(y.Z8,{pointerEvents:"none",children:(0,c.jsx)(g.PT,{color:"gray.300",w:"17px",h:"17px"})}),(0,c.jsx)(y.II,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search Request ID",spellCheck:!1,size:"sm",borderRadius:"md",value:T,name:"search",onChange:s})]}),(0,c.jsxs)(y.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,c.jsx)(y.Ui,{borderRadius:"md",children:"From"}),(0,c.jsx)(y.II,{type:"date",name:"From",value:I,max:D||void 0,onChange:u,borderRadius:"md"})]}),(0,c.jsxs)(y.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,c.jsx)(y.Ui,{borderRadius:"md",children:"To"}),(0,c.jsx)(y.II,{type:"date",borderRadius:"md",name:"To",value:D,min:I||void 0,onChange:h})]}),(0,c.jsxs)(i.kC,{flexShrink:0,alignItems:"center",children:[(0,c.jsx)(i.xv,{fontSize:"xs",mr:2,size:"sm",children:"Reveal PII"}),(0,c.jsx)(C.Z,{revealPII:t,onChange:n})]}),(0,c.jsx)(j.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(g.$I,{}),size:"sm",onClick:k,children:"Download"}),(0,c.jsx)(j.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,c.jsx)(g.LG,{width:"17px"}),size:"sm",onClick:x,children:"Clear all filters"})]})},P=n(78522),z=n(12036),D=n(97142),O=n(68293),R=n(97375),Z=n(26707),L=n(37991),M=n(86589),A=n(11163),q=n(90710),N=n(3357),F=n(9234),B=n(13720),U=n(10061),V=n(53782),X=n(76899),H=n(1521),W=function(e){var t=e.isChecked,n=e.onCheckChange,r=e.request,s=e.revealPII,a=function(e){var t=(0,m.pm)(),n=(0,o.useRef)(null),r=(0,o.useState)(!1),i=r[0],s=r[1],a=(0,o.useState)(!1),u=a[0],l=a[1],d=(0,o.useState)(!1),f=d[0],h=d[1],p=(0,R.VP)(e.id).onCopy,x=(0,A.useRouter)();return{hovered:i,focused:u,menuOpen:f,resetSharedModalStates:function(){l(!1),s(!1),h(!1)},handleMenuClose:function(){return h(!1)},handleMenuOpen:function(){return h(!0)},handleMouseEnter:function(){return s(!0)},handleMouseLeave:function(){return s(!1)},handleFocus:function(){return l(!0)},handleBlur:function(){return l(!1)},handleIdCopy:function(){p(),t({title:"Request ID copied",duration:5e3,render:function(){return(0,c.jsx)(Z.bZ,{bg:"gray.600",borderRadius:"6px",display:"flex",children:(0,c.jsx)(Z.Cd,{color:"white",children:"Request ID copied"})})},containerStyle:{minWidth:"0px"}})},hoverButtonRef:n,shiftFocusToHoverMenu:function(){n.current&&n.current.focus()},handleViewDetails:function(){var t="/privacy-requests/".concat(e.id);x.push(t)}}}(r),u=a.hovered,l=a.handleMenuOpen,d=a.handleMenuClose,f=a.handleMouseEnter,h=a.handleMouseLeave,p=a.handleIdCopy,x=a.menuOpen,v=a.hoverButtonRef,y=a.shiftFocusToHoverMenu,b=a.handleFocus,C=a.handleBlur,S=a.resetSharedModalStates,_=a.focused,w=a.handleViewDetails,k=u||x||_;return(0,c.jsxs)(P.Tr,{_hover:{bg:"gray.50"},bg:k?"gray.50":"white",onMouseEnter:f,onMouseLeave:h,height:"36px","data-testid":"privacy-request-row-".concat(r.status),children:[(0,c.jsx)(P.Td,{px:0,children:(0,c.jsx)(z.XZ,{"aria-label":"Select request",isChecked:!!t,isDisabled:"error"!==r.status,onChange:function(e){return n(r.id,e.target.checked)}})}),(0,c.jsx)(P.Td,{pl:0,py:1,children:(0,c.jsx)(F.Z,{status:r.status})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(q.Z,{daysLeft:r.days_left,includeText:!1,status:r.status})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(B.Z,{rules:r.policy.rules})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(i.xv,{fontSize:"xs",children:(0,c.jsx)(N.Z,{data:r.identity&&(r.identity.email||r.identity.phone_number)||"",revealPII:s})})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(i.xv,{fontSize:"xs",children:(0,U.p6)(r.created_at)})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(i.xv,{fontSize:"xs",children:(0,c.jsx)(N.Z,{data:r.reviewer?r.reviewer.username:"",revealPII:s})})}),(0,c.jsx)(P.Td,{py:1,children:(0,c.jsx)(i.xv,{isTruncated:!0,fontSize:"xs",maxWidth:"87px",children:r.id})}),(0,c.jsxs)(P.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:[(0,c.jsx)(j.zx,{size:"xs",variant:"ghost",mr:2.5,onFocus:y,tabIndex:k?-1:0,"data-testid":"privacy-request-more-btn",children:(0,c.jsx)(g.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsxs)(j.hE,{isAttached:!0,variant:"outline",position:"absolute",right:2.5,top:"50%",transform:"translate(1px, -50%)",opacity:k?1:0,pointerEvents:k?"auto":"none",onFocus:b,onBlur:C,shadow:"base",borderRadius:"md",backgroundColor:"white",children:["error"===r.status&&(0,c.jsx)(H.Z,{buttonProps:{mr:"-px",size:"xs"},handleBlur:C,subjectRequest:r}),"pending"===r.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(V.Z,{subjectRequest:r,onClose:S,ref:v,children:"Approve"}),(0,c.jsx)(X.Z,{subjectRequest:r,onClose:S,children:"Deny"})]}),(0,c.jsxs)(L.v2,{onOpen:l,onClose:d,children:[(0,c.jsx)(L.j2,{as:j.zx,size:"xs",bg:"white",ref:"pending"!==r.status?v:null,children:(0,c.jsx)(g.nX,{color:"gray.700",w:18,h:18})}),(0,c.jsx)(M.h_,{children:(0,c.jsxs)(L.qy,{shadow:"xl","data-testid":"privacy-request-more-menu",children:[(0,c.jsx)(L.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:p,children:(0,c.jsx)(i.xv,{fontSize:"sm",children:"Copy Request ID"})}),(0,c.jsx)(L.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:w,children:(0,c.jsx)(i.xv,{fontSize:"sm",children:"View Details"})})]})})]})]})]})]},r.id)};!function(e){e.ASC="asc",e.DESC="desc",e.UNSELECTED="unselected"}(T||(T={}));var G=function(e){var t=e.sortField,n=e.isLoading,r=function(e){var t=e.sortField,n=e.isLoading,r=(0,S.useSelector)(l.dp),i=(0,S.useDispatch)(),s=(0,o.useState)(T.UNSELECTED),a=s[0],u=s[1],c=(0,o.useState)(!1),d=c[0],f=c[1];return(0,o.useEffect)((function(){n||f(!1)}),[n]),(0,o.useEffect)((function(){void 0===r.sort_direction&&u(T.UNSELECTED)}),[r]),{handleButtonClick:(0,o.useCallback)((function(){switch(f(!0),i((0,l.PU)(t)),a){case T.UNSELECTED:i((0,l.iX)(T.ASC)),u(T.ASC);break;case T.ASC:i((0,l.iX)(T.DESC)),u(T.DESC);break;case T.DESC:i((0,l.p2)()),u(T.UNSELECTED)}}),[a,u,i,t]),buttonState:a,wasButtonJustClicked:d}}({sortField:t,isLoading:n}),s=r.buttonState,a=r.handleButtonClick,u=r.wasButtonJustClicked,d=null;switch(s){case T.ASC:d=(0,c.jsx)(g.HK,{up:!0});break;case T.DESC:d=(0,c.jsx)(g.HK,{up:!1});break;case T.UNSELECTED:default:d=(0,c.jsx)(g.HK,{})}return(0,c.jsx)(i.kC,{paddingLeft:"3px",children:(0,c.jsx)(j.hU,{variant:"ghost","aria-label":"Sort requests",icon:d,isLoading:n&&u,onClick:a})})},K=function(e){var t=e.revealPII,n=(0,D.T)(),r=(0,D.C)(l.dp),s=(0,D.C)(l.fe),a=s.checkAll,u=s.errorRequests,d=(0,l.QA)(r),h=d.data,p=d.isFetching,x=h||{items:[],total:0},v=x.items,m=x.total,y=(0,o.useCallback)((function(){return v.filter((function(e){return"error"===e.status})).map((function(e){return e.id}))}),[v]),g=function(e,t){var r;r=t?[].concat((0,f.Z)(u),[e]):u.filter((function(t){return t!==e})),n((0,l.uT)({checkAll:t&&a,errorRequests:r}))};return(0,o.useEffect)((function(){var e;p&&null!==(e=r.status)&&void 0!==e&&e.includes("error")&&n((0,l.uT)({checkAll:!1,errorRequests:[]}))}),[n,r.status,p]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(P.iA,{size:"sm","data-testid":"privacy-request-table",children:[(0,c.jsx)(P.hr,{children:(0,c.jsxs)(P.Tr,{children:[(0,c.jsx)(P.Th,{px:0,children:(0,c.jsx)(z.XZ,{"aria-label":"Select all",isChecked:a,isDisabled:!v.some((function(e){return"error"===e.status})),onChange:function(){var e=!a;n((0,l.uT)({checkAll:e,errorRequests:e?y():[]}))}})}),(0,c.jsx)(P.Th,{pl:0,children:"Status"}),(0,c.jsx)(P.Th,{children:(0,c.jsxs)(i.kC,{alignItems:"center",children:["Days Left"," ",(0,c.jsx)(G,{sortField:"due_date",isLoading:p})]})}),(0,c.jsx)(P.Th,{children:"Request Type"}),(0,c.jsx)(P.Th,{children:"Subject Identity"}),(0,c.jsx)(P.Th,{children:"Time Received"}),(0,c.jsx)(P.Th,{children:"Reviewed By"}),(0,c.jsx)(P.Th,{children:"Request ID"}),(0,c.jsx)(P.Th,{})]})}),(0,c.jsx)(P.p3,{children:v.map((function(e){return(0,c.jsx)(W,{isChecked:u.includes(e.id),onCheckChange:g,request:e,revealPII:t},e.id)}))})]}),(0,c.jsx)(O.Z,{page:r.page,size:r.size,total:m,handleNextPage:function(){n((0,l.YA)(r.page+1))},handlePreviousPage:function(){n((0,l.YA)(r.page-1))}})]})},Y=a()((function(){return Promise.all([n.e(6894),n.e(7036)]).then(n.bind(n,67036))}),{loading:function(){return(0,c.jsx)("div",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[67036]}}}),J=function(){var e=function(){var e=(0,u.VY)().errorAlert,t=(0,o.useState)(!1),n=t[0],r=t[1],s=(0,o.useState)({count:0,total:0}),a=s[0],d=s[1],f=(0,o.useState)(!0),h=f[0],p=f[1],x=(0,l.tE)().data,v=(0,l.QA)({status:["error"]},{pollingInterval:15e3,skip:h}).data;return(0,o.useEffect)((function(){p(!(x&&x.notify_after_failures>0))}),[x]),(0,o.useEffect)((function(){var e=(null===v||void 0===v?void 0:v.total)||0;e>=((null===x||void 0===x?void 0:x.notify_after_failures)||0)&&e>a.total?(d({count:e-a.total,total:e}),r(!0)):r(!1)}),[null===v||void 0===v?void 0:v.total,null===x||void 0===x?void 0:x.notify_after_failures,a.total]),{processing:function(){n&&e((0,c.jsxs)(i.xu,{children:["DSR automation has failed for"," ",(0,c.jsx)(i.xv,{as:"span",fontWeight:"semibold",children:a.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}(),t=e.processing,n=(0,o.useState)(!1),r=n[0],s=n[1];return(0,o.useEffect)((function(){t()}),[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(i.kC,{"data-testid":"privacy-requests",children:[(0,c.jsx)(i.X6,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,c.jsx)(i.LZ,{}),(0,c.jsx)(Y,{})]}),(0,c.jsx)(I,{revealPII:r,setRevealPII:s}),(0,c.jsx)(K,{revealPII:r})]})},Q=function(){return(0,c.jsx)(r.Z,{title:"Privacy Requests",children:(0,c.jsx)(J,{})})}},16928:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests",function(){return n(60432)}])},5152:function(e,t,n){e.exports=n(73579)},53250:function(e,t,n){"use strict";var r=n(67294);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,a=r.useEffect,o=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return o((function(){i.value=n,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,n,t]),a((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},61688:function(e,t,n){"use strict";e.exports=n(53250)}},function(e){e.O(0,[2437,7601,2350,248,6648,4231,8522,5657,8057,7080,2490,9774,2888,179],(function(){return t=16928,e(e.s=t);var t}));var t=e.O();_N_E=t}]);