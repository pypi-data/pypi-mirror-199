(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{49743:function(e,r,t){"use strict";var n=t(59499),s=t(4730),i=t(30268),o=t(48591),a=t(43894),c=t(85893),l=["search","onChange","withIcon","withClear"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.search,t=e.onChange,n=e.withIcon,u=e.withClear,p=(0,s.Z)(e,l);return(0,c.jsxs)(i.BZ,{size:"sm",minWidth:"308px",children:[n?(0,c.jsx)(i.Z8,{pointerEvents:"none",children:(0,c.jsx)(o.PT,{color:"gray.300",w:"17px",h:"17px"})}):null,(0,c.jsx)(i.II,d({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:r,name:"search",onChange:function(e){return t(e.target.value)}},p)),u?(0,c.jsx)(i.xH,{width:"3.5rem",display:"flex",alignItems:"center",children:(0,c.jsx)(a.zx,{fontWeight:"light",size:"sm",onClick:function(){t("")},height:"95%",width:"95%",children:"Clear"})}):null]})}},10846:function(e,r,t){"use strict";t.d(r,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var n=t(59499),s=t(23256),i=t(85893);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c=function(e){var r=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,i.jsx)(c,{message:e});return a(a({},u),{description:r})},p=function(e){var r=(0,i.jsx)(l,{message:e});return a(a({},u),{description:r,status:"error"})}},78221:function(e,r,t){"use strict";var n=t(4730),s=t(50029),i=t(16835),o=t(87794),a=t.n(o),c=t(13450),l=t(26537),u=t(23256),d=t(43894),p=t(82175),h=t(11163),f=(t(67294),t(74231)),j=t(97142),m=t(18459),b=t(96016),g=t(65698),x=t(10846),O=t(43072),v=t(85893),y=["user"],w={username:"",usernameConfirmation:""};r.Z=function(e){var r=e.user,t=(0,n.Z)(e,y),o=t.isOpen,P=t.onClose,C=function(e){var r=e.id,t=e.username,n=e.onClose,o=(0,c.pm)(),l=(0,h.useRouter)(),u=(0,j.T)(),d=(0,O.I1)(),p=(0,i.Z)(d,1)[0],b=function(){var e=(0,s.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r);case 2:t=e.sent,(0,g.D4)(t)?o((0,x.Vo)((0,g.e$)(t.error))):(o((0,x.t5)("Successfully deleted user")),n()),u((0,O.Vv)(void 0)),l.push(m.e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleDeleteUser:b,validationSchema:f.Ry().shape({username:f.Z_().required().oneOf([t],"Username must match this user's").label("Username"),usernameConfirmation:f.Z_().required().oneOf([f.iH("username")],"Usernames must match").label("Username confirmation")})}}({id:r.id,username:r.username,onClose:P}),D=C.handleDeleteUser,S=C.validationSchema;return(0,v.jsxs)(l.u_,{isCentered:!0,isOpen:o,onClose:P,children:[(0,v.jsx)(l.ZA,{}),(0,v.jsx)(l.hz,{"data-testid":"delete-user-modal",children:(0,v.jsx)(p.J9,{initialValues:w,validationSchema:S,onSubmit:D,children:function(e){var r=e.isSubmitting,t=e.dirty,n=e.isValid;return(0,v.jsxs)(p.l0,{children:[(0,v.jsx)(l.xB,{children:"Delete User"}),(0,v.jsx)(l.ol,{}),(0,v.jsx)(l.fe,{children:(0,v.jsxs)(u.Kq,{direction:"column",spacing:4,children:[(0,v.jsx)(b.j0,{name:"username",label:"Enter username"}),(0,v.jsx)(b.j0,{name:"usernameConfirmation",label:"Confirm username"})]})}),(0,v.jsx)(l.mz,{children:(0,v.jsxs)(d.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,v.jsx)(d.zx,{onClick:P,variant:"outline",width:"50%",children:"Cancel"}),(0,v.jsx)(d.zx,{colorScheme:"primary",disabled:!t||!n,isLoading:r,type:"submit",width:"50%","data-testid":"submit-btn",children:"Delete User"})]})})]})}})})]})}},41040:function(e,r,t){"use strict";t.d(r,{K:function(){return s}});var n=t(16227),s=[{label:"Owner",permissions_label:"Owner",roleKey:n.A7.OWNER,description:"Owners have view and edit access to the whole organization and can create new users"},{label:"Contributor",permissions_label:"Contributor",roleKey:n.A7.CONTRIBUTOR,description:"Contributors can create new users and have view and edit access to the whole organization apart from configuring storage and messaging"},{label:"Viewer",permissions_label:"Viewer",roleKey:n.A7.VIEWER,description:"Viewers have view access to the Data Map and all systems"},{label:"Viewer & Approver",permissions_label:"Viewer & Approver",roleKey:n.A7.VIEWER_AND_APPROVER,description:"Viewer & Approvers have view access to the Data Map but can also manage Privacy Requests"},{label:"Approver",permissions_label:"Approver",roleKey:n.A7.APPROVER,description:"Approvers can only access the Privacy Requests portal to manage requests"}]},42498:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return T}});var n=t(23256),s=t(67294),i=t(59499),o=t(78522),a=t(43894),c=t(14416),l=t(97142),u=t(43072),d=t(97375),p=t(37991),h=t(48591),f=t(86589),j=t(11163),m=t(41040),b=t(18459),g=t(78221),x=t(85893);function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var y=function(e){var r,t=e.user,s=(0,j.useRouter)(),i=(0,d.qY)(),c=function(){s.push("".concat(b.e3,"/profile/").concat(t.id))},l=(0,u.gU)(null!==(r=t.id)&&void 0!==r?r:"",{skip:!t.id}).data,O=[];return l&&l.roles&&l.roles.forEach((function(e){var r=m.K.find((function(r){return r.roleKey===e}));r&&O.push(r.permissions_label)})),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.Tr,{_hover:{bg:"gray.50",cursor:"pointer"},height:"36px","data-testid":"row-".concat(t.id),children:[(0,x.jsx)(o.Td,{pl:0,py:1,onClick:c,children:t.username}),(0,x.jsx)(o.Td,{pl:0,py:1,onClick:c,children:t.first_name}),(0,x.jsx)(o.Td,{pl:0,py:1,onClick:c,children:t.last_name}),(0,x.jsx)(o.Td,{pl:0,py:1,onClick:c,children:O.map((function(e){return(0,x.jsx)(n.Ct,{bg:"gray.500",color:"white",paddingLeft:"8px",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,x.jsx)(o.Td,{pl:0,py:1,onClick:c,children:t.created_at?new Date(t.created_at).toUTCString():null}),(0,x.jsx)(o.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,x.jsx)(a.hE,{children:(0,x.jsxs)(p.v2,{children:[(0,x.jsx)(p.j2,{as:a.zx,size:"xs",bg:"white","data-testid":"menu-btn",children:(0,x.jsx)(h.nX,{color:"gray.700",w:18,h:18})}),(0,x.jsx)(f.h_,{children:(0,x.jsxs)(p.qy,{shadow:"xl","data-testid":"menu-".concat(t.id),children:[(0,x.jsx)(p.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:c,"data-testid":"edit-btn",children:(0,x.jsx)(n.xv,{fontSize:"sm",children:"Edit"})}),(0,x.jsx)(p.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:i.onOpen,"data-testid":"delete-btn",children:(0,x.jsx)(n.xv,{fontSize:"sm",children:"Delete"})})]})})]})})})]},t.id),(0,x.jsx)(g.Z,v({user:t},i))]})};function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var C=function(){var e=function(){var e=(0,c.useDispatch)(),r=(0,c.useSelector)(u.lq),t=(0,u.wv)(r),n=t.data,s=t.isLoading,i=n||{users:[],total:0},o=i.items,a=i.total;return P(P({},r),{},{isLoading:s,users:o,total:a,handleNextPage:function(){e((0,u.YA)(r.page+1))},handlePreviousPage:function(){e((0,u.YA)(r.page-1))}})}(),r=e.users,t=e.total,i=e.page,d=e.size,p=e.handleNextPage,h=e.handlePreviousPage,f=(i-1)*d+1,j=Math.min(t,i*d),m=(0,l.T)();return(0,s.useEffect)((function(){m((0,u.Vv)(void 0))}),[m]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.iA,{size:"sm","data-testid":"user-management-table",children:[(0,x.jsx)(o.hr,{children:(0,x.jsxs)(o.Tr,{children:[(0,x.jsx)(o.Th,{pl:0,children:"Username"}),(0,x.jsx)(o.Th,{pl:0,children:"First Name"}),(0,x.jsx)(o.Th,{pl:0,children:"Last Name"}),(0,x.jsx)(o.Th,{pl:0,children:"Permissions"}),(0,x.jsx)(o.Th,{pl:0,children:"Created At"})]})}),(0,x.jsx)(o.p3,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,x.jsx)(y,{user:e},e.id)}))})]}),(0,x.jsxs)(n.kC,{justifyContent:"space-between",mt:6,children:[(0,x.jsx)(n.xv,{fontSize:"xs",color:"gray.600",children:t>0?(0,x.jsxs)(x.Fragment,{children:["Showing ",Number.isNaN(f)?0:f," to"," ",Number.isNaN(j)?0:j," of"," ",Number.isNaN(t)?0:t," results"]}):"0 results"}),(0,x.jsxs)("div",{children:[(0,x.jsx)(a.zx,{disabled:i<=1,onClick:h,mr:2,size:"sm",children:"Previous"}),(0,x.jsx)(a.zx,{disabled:i*d>=t,onClick:p,size:"sm",children:"Next"})]})]})]})};C.defaultProps={users:[]};var D=C,S=t(41664),_=t.n(S),E=t(49743);function z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var N=function(){var e=(0,c.useSelector)(u.lq),r=(0,c.useDispatch)();return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?z(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({handleSearchChange:function(e){r((0,u.SY)(e))}},e)},k=function(){var e=N(),r=e.handleSearchChange,t=e.username;return(0,x.jsxs)(n.Kq,{direction:"row",spacing:4,mb:6,children:[(0,x.jsx)(E.Z,{search:t,onChange:r,placeholder:"Search by Username"}),(0,x.jsx)(_(),{href:"".concat(b.e3,"/new"),passHref:!0,children:(0,x.jsx)(a.zx,{colorScheme:"primary",flexShrink:0,size:"sm",children:"Add New User"})})]})},A=t(48057),T=function(){return(0,x.jsxs)(A.Z,{title:"User Management",children:[(0,x.jsx)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,x.jsx)(k,{}),(0,x.jsx)(D,{})]})}},58769:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return t(42498)}])}},function(e){e.O(0,[2437,7601,2350,248,6648,4231,8522,8057,7080,9774,2888,179],(function(){return r=58769,e(e.s=r);var r}));var r=e.O();_N_E=r}]);