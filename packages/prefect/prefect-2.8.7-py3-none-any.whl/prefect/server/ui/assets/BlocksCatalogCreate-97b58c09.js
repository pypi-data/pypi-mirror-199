import{d as C,M as x,as as A,B as D,c as t,Y as m,h as e,a as n,w as u,n as p,b as M,e as P,o as k,g as V,aT as Y,aU as w,aV as F,aW as N,aX as X,ap as d,aY as q,z}from"./index-8c2645e8.js";import{u as H}from"./usePageTitle-c65d4e12.js";const W=C({__name:"BlocksCatalogCreate",setup(O){const r=x(),a=P(),i=A("redirect"),b=D("blockTypeSlug"),y=t(()=>b.value?[b.value]:null),f=m(r.blockTypes.getBlockTypeBySlug,y),o=t(()=>f.response),h=t(()=>o.value?[o.value.id]:null),_=m(r.blockSchemas.getBlockSchemaForBlockType,h),l=t(()=>_.response);function S(s){r.blockDocuments.createBlockDocument(s).then(({id:c})=>B(c)).catch(c=>{d("Failed to create block","error"),console.error(c)})}function g(){a.back()}function B(s){if(d("Block created successfully","success"),i.value){const c=a.resolve(q(i.value));a.push(c);return}a.push(z.block(s))}const v=t(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return H(v),(s,c)=>{const T=M("p-layout-default");return e(o)?(k(),n(T,{key:0,class:"blocks-catalog-create"},{header:u(()=>[V(e(Y),{"block-type":e(o)},null,8,["block-type"])]),default:u(()=>[e(o)?(k(),n(e(w),{key:0,"block-type":e(o)},{default:u(()=>[e(l)?(k(),n(e(F),N({key:e(l).id,"block-schema":e(l)},X({submit:S,cancel:g})),null,16,["block-schema"])):p("",!0)]),_:1},8,["block-type"])):p("",!0)]),_:1})):p("",!0)}}});export{W as default};
