"use strict";(self.webpackChunkjupyterlab_dmn=self.webpackChunkjupyterlab_dmn||[]).push([[568],{568:(e,t,n)=>{n.r(t),n.d(t,{OutputWidget:()=>a,default:()=>r,rendererFactory:()=>o});var i=n(431),s=n(711);n(462),n(693),n(517),n(865);const d="application/dmn+xml";class a extends i.Widget{constructor(e){super(),this._dmn="",this._xml="",this._json="",this._mimeType="",this._mimeType=e.mimeType,this.addClass("mimerenderer-dmn")}async renderModel(e){var t,n,i,d;try{let a=!1;this._dmn||(this._dmn=new s.Z({additionalModules:[]}),a=!0),e.data[this._mimeType]&&e.data[this._mimeType]!==this._xml&&(this._xml=e.data[this._mimeType],await this._dmn.importXML(e.data[this._mimeType]),a=!0),e.data["application/dmn+json"]&&e.data["application/dmn+json"]!==this._json&&(this._json=e.data["application/dmn+json"],a=!0),this._dmn&&(this._dmn.attachTo(this.node),window.foo=this.node,window.bar=this._dmn);const o=JSON.parse(e.data["application/dmn+json"]||"{}");if(this._dmn&&a){if(o.style)for(const e of Object.keys(o.style))this.node.style.setProperty(e,o.style[e]);const e=this._dmn.getViews().find((e=>e.id===o.decisionId))||this._dmn.getViews().find((e=>e.id.startsWith("Decision")));await this._dmn.open(e);for(const e of this.node.getElementsByClassName("view-drd"))null===(n=null===(t=e)||void 0===t?void 0:t.style)||void 0===n||n.setProperty("display","none");for(const e of o.matchedRules||[])if(e&&e.ruleId){const t=document.evaluate(`//td[@data-row-id="${e.ruleId}" or @data-element-id="${e.ruleId}"]`,document,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),n=[];let s=t.iterateNext();for(;s;)n.push(s),s=t.iterateNext();for(const e of n)null===(d=null===(i=e)||void 0===i?void 0:i.style)||void 0===d||d.setProperty("background-color","#add6eb")}}}catch(e){console.warn(e)}return Promise.resolve()}}const o={safe:!0,mimeTypes:[d],createRenderer:e=>new a(e)},r={id:"jupyterlab-dmn:plugin",rendererFactory:o,rank:70,dataType:"string",fileTypes:[{name:"dmn",mimeTypes:[d],extensions:[".dmn"]}],documentWidgetFactoryOptions:{name:"A JupyterLab extension for rendering DMN files",primaryFileType:"dmn",fileTypes:["dmn"],defaultFor:["dmn"]}}}}]);